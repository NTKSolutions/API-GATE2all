<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>GATE2all Guia de Integração API V2</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;json&quot;,&quot;shell&quot;,&quot;java&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="json">JSON</a>
              <a href="#" data-language-name="shell">cURL</a>
              <a href="#" data-language-name="java">JAVA</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://gate.2all.com.br'>Painel de Controle do GATE2all</a></li>
            <li><a href='https://apidemo.gate2all.com.br'>Painel de Controle do SandBox</a></li>
            <li><a href='https://github.com/orgs/NTKSolutions'>GitHub</a></li>
        </ul>
      <div id="google_translate_element"></div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introdu-o">Introdução</h1>

<p>Olá! Bem vindo a API REST do <strong>GATE2all.</strong></p>

<p>Aqui você irá encontrar informações de como integrar seu sistema ao gateway de pagamentos <strong>GATE2all.</strong></p>

<p>O <strong>GATE2all</strong> é uma plataforma de pagamentos que conecta lojas virtuais, app&rsquo;s mobile, ERP&rsquo;s ou sistema de cobraças com as principais instituições de pagamentos do Brasil.</p>

<p>Ao integrar-se ao gateway de pagamentos <strong>GATE2all</strong> seu negócio poderá receber transações através das principais formas de pagamentos como cartão de crédito e débito, boleto bancário e transferência entre contas.</p>

<p>A vantagem de se utilizar nossa plataforma é que você não precisará se integrar a cada adquirente ou bancos, através do <strong>GATE2all</strong> você se beneficia delas de forma unificada e sem complicações.</p>

<p>O <strong>GATE2all</strong> segue as rigorosas normas do <strong>PCI DSS</strong> que são regras que visam proteger os dados do portador do cartão. Conheça mais no site <a href="https://pt.pcisecuritystandards.org">https://pt.pcisecuritystandards.org</a></p>

<h2 id="sobre-este-documento">Sobre este documento</h2>

<p>Este documento constitui a especificação técnica para integração de sistemas que desejam operar com o gateway de pagamento <strong>GATE2all</strong>.</p>

<p>Aqui serão listadas todas as funcionalidades da plataforma <strong>GATE2all</strong> especificando os endereços de requisição, parâmetros da requisição, formato e exemplos.</p>

<p>Disponibilizamos as coleções no client REST Postman. </p>

<p>Para instalar o client Postman, basta acessar <a href='https://www.getpostman.com/' target='_blank'>https://www.getpostman.com</a> </p>

<p>Para importar uma coleção contendo os endpoints e mensagens de exemplos, basta clicar no botão abaixo.</p>

<p><a href="https://app.getpostman.com/run-collection/8ec1d4e437adde5f8e70" target="_blank"><img alt="Run in Postman" src="https://run.pstmn.io/button.svg" /></a></p>

<aside class="warning">
As informações contidas neste documento estão sujeitas a alteração sem prévio aviso.
</aside>

<h3 id="p-blico">PÚBLICO</h3>

<p>Este documento é destinado aos desenvolvedores e analistas de sistemas de e-commerce que desejem integrar sua loja virtual com o gateway <strong>GATE2all</strong> para a realização de transações eletrônicas.</p>

<h3 id="contatos">CONTATOS</h3>

<p>Suporte ao desenvolvedor é prestado através do e-mail <a href="mailto:suporte@2all.com.br">suporte@2all.com.br.</a>
<aside class="warning">
Nossa equipe de suporte a desenvolvedores não provê suporte para linguagens de programação e tecnologias utilizadas pelo desenvolvedor.
</aside></p>

<h2 id="gloss-rio">Glossário</h2>

<p><strong>Autenticação</strong>: Processo para assegurar que o comprador é o portador legítimo.</p>

<p><strong>Autorização</strong>: Processo para verificar se uma compra pode ou não ser realizada num cartão. Verifica-se limite, se o cartão está ativo, se o portador está adimplente, etc.</p>

<p><strong>Cancelamento</strong>: Processo para cancelar uma compra no cartão.</p>

<p><strong>Captura</strong>: Processo para confirmar uma autorização. É após, a captura, que o portador recebe um débito na fatura de seu cartão.</p>

<p><strong>Chave de acesso</strong>: Chave de autenticação da loja usada na chamada aos Web Services da Cielo.</p>

<p><strong>Comprador</strong>: É aquele que efetua compra na loja virtual.</p>

<p><strong>Emissor</strong>: Empresa responsável pela emissão do cartão utilizado pelo cliente para a realização de transações eletrônicas no Estabelecimento. Administradoras associadas a bancos são os principais emissores de cartões, assim como administradoras de cartões de benefício (refeição, alimentação, combustível, premiação, etc.).</p>

<p><strong>Estabelecimento comercial</strong> ou <strong>EC</strong>: Empresa que responde pela loja virtual.</p>

<p><strong>Número de afiliação</strong>: É um identificador que o lojista recebe após ter-se afiliado a Cielo.</p>

<p><strong>Portador</strong>: É o mesmo que comprador. É aquele que tem o porte de um cartão.</p>

<p><strong>TID</strong>: Identificador único da transação.</p>

<p><strong>Transação</strong>: É o pedido de compra do portador na rede adquirente.</p>

<p><strong>Gateway de pagamento</strong>: é uma aplicação que realiza transações financeiras através de web sites. Sua função basicamente é comunicar com as redes adquirentes e efetuar com segurança a captura dos dados do comprador.</p>

<p><strong>Rede Adquirente</strong>: Empresa responsável por prover o serviço de captura de transações eletrônicas (seja de cartão de crédito/débito ou outro meio de pagamento). Cielo, Rede, GetNet e BANRISUL são exemplos de Redes adquirentes brasileiras.</p>

<p><strong>Bandeira</strong>: Empresa definindo um padrão e provendo serviços de intercâmbio e troca de informações entre a Rede Adquirente e o Emissor. Visa, MasterCard e American Express são exemplos típicos de bandeiras.</p>

<p><strong>Tokenização</strong>: Método para gravar cartão do comprador no ambiente Cielo para realização de transações sem o número do cartão.</p>

<p><strong>Soft Descriptor</strong>: Função para incluir um texto que será exibido na fatura do cartão de crédito do comprador.</p>

<p><strong>Pré-autorização</strong>: Tipo de transação que consulta e reserva um valor estimado para o estabelecimento como garantia até a conclusão da operação, aplica-se normalmente há locadoras de veículos e hotéis.</p>

<p><strong>Transferência online</strong>: A Transferência entre contas bancárias é uma opção de pagamento on-line. Esse meio de pagamento utiliza-se do Internet Banking do lojista e do consumidor final. No momento do pagamento, basta informar os dados da conta, a senha e a frase secreta, e o banco efetuará a transferência do valor da compra diretamente para a loja, de forma rápida e segura.</p>

<h2 id="pr-requisitos">Pré-requisitos</h2>

<p>Para que o lojista possa utilizar as funcionalidades do <strong>GATE2all</strong>, este deve possuir afiliação para e-commerce junto às redes adquirentes ou bancos aos quais deseja encaminhar transações ou cobranças.</p>

<h2 id="adquirentes-integradas">Adquirentes integradas</h2>

<p><strong>Cielo</strong> API 1.5 e 3.0</p>

<p><strong>REDE</strong> Komerci e e-Rede Adquirencia</p>

<p><strong>GetNet</strong></p>

<p><a href="#bandeiras">Bandeiras suportadas</a> </p>

<aside class="warning">
As transações de cartão de débito (Visa Electron e Mastercard Maestro) só são processadas se houver autenticação pelo mecanismo Verified by Visa ou Mastercard Secure Code.

Não são todos os bancos emissores da Mastercard Maestro que suportam transações autenticadas no e-commerce.

</aside>

<h2 id="bancos-integrados">Bancos integrados</h2>

<p><img src="images/logo-bradesco.jpg" /> Comércio Eletrônico Bradesco</p>

<ul>
<li>Emissão de boleto</li>
<li>Transferência entre contas</li>
</ul>

<p><img src="images/itau-logo.jpg" /> Itaú Shopline</p>

<ul>
<li>Emissão de boleto</li>
<li>Transferência entre contas</li>
</ul>

<h2 id="tipos-de-transa-es">Tipos de Transações</h2>

<h3 id="cr-dito">Crédito</h3>

<p>As opções de pagamento com cartão de crédito são: </p>

<ul>
<li>À vista. </li>
<li>Parcelado emissor. </li>
<li>Parcelado loja.</li>
</ul>

<aside class="warning">
O valor do resultante da divisão do valor do pedido pelo número de parcelas não deve ser inferior a R$5,00. Caso contrário a transação será negada.
</aside>
 

<h3 id="d-bito">Débito</h3>

<p>Bandeiras Visa Electron e Maestro através da rede adquirente Cielo, para esta modalidade é necessário a autenticação do portador através dos mecanismos “Verify By Visa” ou “Mastercard Secure Code”.</p>

<p>O cartão do portador deve estar habilitado para transações autenticadas.</p>

<h3 id="transfer-ncia-on-line-entre-contas">Transferência on-line entre contas</h3>

<p>Transferência online entre contas bancárias. Para utilizar este serviço o cliente deverá ter contratado junto ao banco o serviço de comercio eletrônico Bradesco ou Itaú Shopline.</p>

<h3 id="boletos">Boletos</h3>

<p>Emissão de boleto bancário com os bancos, Bradesco e Itaú, com conciliação automática. A compensação do boleto poderá ser verificada através do relatório de transações.</p>

<p>Para utilizar este serviço o cliente deverá ter contratado junto ao banco o serviço de comercio eletrônico.</p>

<h2 id="tipos-de-integra-o">Tipos de Integração</h2>

<p>O gateway de pagamento <strong>GATE2all</strong> permite dois tipos de integração:</p>

<ol>
<li><strong>Loja</strong>, que redireciona o comprador para um ambiente seguro do <strong>GATE2all</strong> onde os dados do cartão serão capturados. </li>
<li><strong>Integrado</strong>, onde o lojista poderá capturar os dados do cartão em seu próprio sistema.</li>
</ol>

<h2 id="ambientes">Ambientes</h2>

<p>Para utilizar nosso ambiente de testes envie um e-mail informando os dados abaixo para <a href="mailto:suporte@2all.com.br">suporte@2all.com.br</a> onde realizaremos o cadastro do desenvolvedor ou empresa responsável pelo desenvolvimento. </p>

<ul>
<li><code class="prettyprint">RAZAO SOCIAL</code></li>
<li><code class="prettyprint">NOME FANTASIA</code></li>
<li><code class="prettyprint">CNPJ</code></li>
<li><code class="prettyprint">Nome do desenvolvedor</code></li>
<li><code class="prettyprint">Telefone</code></li>
<li><code class="prettyprint">E-mail</code></li>
</ul>

<h3 id="ambiente-produ-o">Ambiente Produção</h3>

<p><strong>Requisição de transação</strong>: https://api.gate2all.com.br/</p>

<h3 id="ambiente-de-testes-sandbox">Ambiente de testes (Sandbox)</h3>

<p><strong>Requisição de transação</strong>: https://apidemo.gate2all.com.br/</p>

<h2 id="cart-es-de-testes">Cartões de Testes</h2>

<p>Disponibilizamos os seguintes cartões de testes para simular os status das transações.</p>

<table><thead>
<tr>
<th>Status</th>
<th>Cartão</th>
</tr>
</thead><tbody>
<tr>
<td>AUTORIZADA</td>
<td>Qualquer número de cartão que respeite <a href="https://en.wikipedia.org/wiki/Luhn_algorithm">Algoritmo Luhn</a></td>
</tr>
<tr>
<td>FALHA_NA_COMUNICACAO_COM_FORNECEDOR</td>
<td>4676674786512068</td>
</tr>
<tr>
<td>PENDENTE_DE_CONFIRMACAO_TRANSACAO_NAO_PROCESSADA_NO_FORNECEDOR</td>
<td>4532365531093678</td>
</tr>
<tr>
<td>PENDENTE_DE_CONFIRMACAO_TRANSACAO_PROCESSADA_NO_FORNECEDOR</td>
<td>5375387267180047</td>
</tr>
<tr>
<td>TRANSACAO_INICIADA</td>
<td>4490861761911670</td>
</tr>
<tr>
<td>CRIADA</td>
<td>4490861761911670</td>
</tr>
<tr>
<td>NEGADA</td>
<td>4035943194824415</td>
</tr>
<tr>
<td>TIMEOUT</td>
<td>4539591924980550</td>
</tr>
</tbody></table>

<h2 id="n-mero-de-documentos-de-testes-boleto-e-transfer-ncia">Número de Documentos de Testes Boleto e Transferência</h2>

<table><thead>
<tr>
<th>Status</th>
<th>Número Documento</th>
</tr>
</thead><tbody>
<tr>
<td>TRANSACAO_INICIADA</td>
<td>Qualquer número de documento válido</td>
</tr>
<tr>
<td>CONFIRMADA (BOLETO PAGO MAIOR +R$10,00)</td>
<td>34331423786</td>
</tr>
<tr>
<td>CONFIRMADA (BOLETO PAGO MENOR -R$10,00)</td>
<td>18805556890</td>
</tr>
<tr>
<td>CONFIRMADA (TRANSFERÊNCIA)</td>
<td>45601654247</td>
</tr>
<tr>
<td>CONFIRMADA (BOLETO)</td>
<td>74717683471</td>
</tr>
</tbody></table>

<h1 id="autentica-o">Autenticação</h1>

<p>Todas as requisições são autenticadas através das credenciais de acesso (USUÁRIO E CHAVE) fornecidos após o cadastro. Os dados de acesso são enviados pelo header.</p>

<ul>
<li><code class="prettyprint">Content-Type: application/json</code></li>
<li><code class="prettyprint">authenticationApi: USUÁRIO</code></li>
<li><code class="prettyprint">authenticarionKey: CHAVE</code></li>
</ul>

<p><strong>Exemplo de configuração no POSTMAN:</strong></p>

<p><img src='images/authenticationApi.png' /></p>

<h1 id="gate2all-loja">GATE2all Loja</h1>

<p>No <strong>GATE2all</strong> Loja é possível realizar vendas sem a necessidade de desenvolver-se uma página segura de pagamentos, por meio do recurso chamado <strong>Intenção de Venda</strong>. </p>

<p>Através deste tipo de integração o comprador digita os dados do cartão no ambiente seguro do gateway de pagamentos <strong>GATE2all</strong>, isentando a loja, da manipulação dos dados sensíveis do cartão do comprador.</p>

<h2 id="inten-o-de-venda">Intenção de Venda</h2>

<p>Para realizar uma intenção de venda é necessário enviar um POST para o seguinte recurso: </p>

<h3 id="requisi-o">Requisição</h3>

<aside class="request"><span class="method post">POST</span> <span class="endpoint">/v1/intention</span></aside>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"referenceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19893211234"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Mouse sem fio"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"postBackUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://url-notificacao"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"redirectUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://url-redirect"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"dhExpiration"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-01-25T18:10:53"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"customer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Comprador Teste"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"document"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345678909"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"compradorteste@gmail.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Endereco"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"district"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Vila Olimpia"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"zipcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"09878675"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sao Paulo"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SP"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"payment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"card"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nt">"capture"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nt">"installments"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"fixedInstallments"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nt">"interestType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"authenticate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"softDescriptor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Gate2@all"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"saveCard"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"electronicTransfer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bradesco"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"bankSlip"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"expirationDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-01-30"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"instructions"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Aceitar somente até a data de vencimento, após essa data juros de 1% dia"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"guarantor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Comprador Teste"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bradesco"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre class="highlight shell"><code></code></pre>
<pre class="highlight java"><code>
<span class="kn">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.DataOutputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStreamReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>

<span class="n">URL</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"https://api.2all.com.br/v1/intention"</span><span class="o">);</span>
<span class="n">HttpURLConnection</span> <span class="n">con</span> <span class="o">=</span> <span class="o">(</span><span class="n">HttpURLConnection</span><span class="o">)</span> <span class="n">obj</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>

<span class="n">con</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"content-type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"authenticationapi"</span><span class="o">,</span> <span class="s">"demo"</span><span class="o">);</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"authenticationkey"</span><span class="o">,</span> <span class="s">"demo"</span><span class="o">);</span>

<span class="n">String</span> <span class="n">body</span> <span class="o">=</span> <span class="s">"{"</span>
        <span class="o">+</span> <span class="s">"\"referenceId\": \"19893211234\","</span>
        <span class="o">+</span> <span class="s">"\"amount\": \"100\","</span>
        <span class="o">+</span> <span class="s">"\"description\": \"Mouse sem fio\","</span>
        <span class="o">+</span> <span class="s">"\"postBackUrl\": \"http://url-notificacao\","</span>
        <span class="o">+</span> <span class="s">"\"redirectUrl\": \"http://url-redirect\","</span>
        <span class="o">+</span> <span class="s">"\"dhExpiration\": \"2018-01-25T18:10:53\","</span>
        <span class="o">+</span> <span class="s">"    \"customer\": {"</span>
        <span class="o">+</span> <span class="s">"       \"name\": \"Comprador Teste\","</span>
        <span class="o">+</span> <span class="s">"       \"document\": \"12345678909\","</span>
        <span class="o">+</span> <span class="s">"       \"email\": \"compradorteste@gmail.com\","</span>
        <span class="o">+</span> <span class="s">"       \"address\": {"</span>
        <span class="o">+</span> <span class="s">"           \"address\": \"Endereco\","</span>
        <span class="o">+</span> <span class="s">"           \"number\": \"100\","</span>
        <span class="o">+</span> <span class="s">"           \"district\": \"Vila Olimpia\","</span>
        <span class="o">+</span> <span class="s">"           \"zipcode\": \"09878675\","</span>
        <span class="o">+</span> <span class="s">"           \"city\": \"Sao Paulo\","</span>
        <span class="o">+</span> <span class="s">"           \"state\": \"SP\""</span>
        <span class="o">+</span> <span class="s">"        }"</span>
        <span class="o">+</span> <span class="s">"    },"</span>
        <span class="o">+</span> <span class="s">"   \"payment\": {"</span>
        <span class="o">+</span> <span class="s">"        \"card\": {"</span>
        <span class="o">+</span> <span class="s">"            \"type\": 0,"</span>
        <span class="o">+</span> <span class="s">"            \"capture\": false,"</span>
        <span class="o">+</span> <span class="s">"            \"installments\": \"2\","</span>
        <span class="o">+</span> <span class="s">"            \"fixedInstallments\": false,"</span>
        <span class="o">+</span> <span class="s">"            \"interestType\": \"4\","</span>
        <span class="o">+</span> <span class="s">"            \"authenticate\": \"3\","</span>
        <span class="o">+</span> <span class="s">"            \"softDescriptor\": \"Gate2@all\","</span>
        <span class="o">+</span> <span class="s">"            \"saveCard\": true"</span>
        <span class="o">+</span> <span class="s">"        },"</span>
        <span class="o">+</span> <span class="s">"        \"electronicTransfer\": {"</span>
        <span class="o">+</span> <span class="s">"            \"provider\": \"Bradesco\""</span>
        <span class="o">+</span> <span class="s">"        },"</span>
        <span class="o">+</span> <span class="s">"        \"bankSlip\": {"</span>
        <span class="o">+</span> <span class="s">"            \"expirationDate\": \"2018-01-30\","</span>
        <span class="o">+</span> <span class="s">"            \"instructions\": \"Aceitar somente ate a data de vencimento, apes essa data juros de 1% dia\","</span>
        <span class="o">+</span> <span class="s">"            \"guarantor\": \"Comprador Teste\","</span>
        <span class="o">+</span> <span class="s">"            \"provider\": \"Bradesco\""</span>
        <span class="o">+</span> <span class="s">"        }"</span>
        <span class="o">+</span> <span class="s">"    }"</span>
        <span class="o">+</span> <span class="s">"}"</span><span class="o">;</span>

<span class="n">con</span><span class="o">.</span><span class="na">setDoOutput</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
<span class="n">DataOutputStream</span> <span class="n">dos</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DataOutputStream</span><span class="o">(</span><span class="n">con</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">());</span>
<span class="n">dos</span><span class="o">.</span><span class="na">writeBytes</span><span class="o">(</span><span class="n">body</span><span class="o">);</span>
<span class="n">dos</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
<span class="n">dos</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

<span class="n">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Scanner</span><span class="o">(</span><span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">con</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">())));</span>
<span class="n">String</span> <span class="n">response</span> <span class="o">=</span> <span class="n">scanner</span><span class="o">.</span><span class="na">nextLine</span><span class="o">();</span>
<span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">);</span>

</code></pre>

<table><thead>
<tr>
<th>Propriedade</th>
<th>Tipo</th>
<th>Tamanho</th>
<th>Obrigatório</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">referenceId</code></td>
<td>Texto</td>
<td>100</td>
<td>Sim</td>
<td>Número de identificação da loja.</td>
</tr>
<tr>
<td><code class="prettyprint">amount</code></td>
<td>Número</td>
<td>16</td>
<td>Sim</td>
<td>Valor da transação sem pontuação. Os dois últimos dígitos são os centavos. (Ex: amount: 100 = R$ 1,00)</td>
</tr>
<tr>
<td><code class="prettyprint">description</code></td>
<td>Texto</td>
<td>300</td>
<td>Não</td>
<td>Descrição da transação.</td>
</tr>
<tr>
<td><code class="prettyprint">postBackUrl</code></td>
<td>Texto</td>
<td>—</td>
<td>Sim</td>
<td>URL onde o GATE2all notificará eventuais status da trancação para o lojista.</td>
</tr>
<tr>
<td><code class="prettyprint">redirectUrl</code></td>
<td>Texto</td>
<td>—</td>
<td>Não</td>
<td>URL onde o GATE2all redirecionará o comprador após o processamento da transação.</td>
</tr>
<tr>
<td><code class="prettyprint">dhExpiration</code></td>
<td>Texto</td>
<td>20</td>
<td>Não</td>
<td>Data da expiração da intenção. Formato <strong>2017-08-25T18:10:53</strong></td>
</tr>
<tr>
<td><code class="prettyprint">customer.name</code></td>
<td>Texto</td>
<td>100</td>
<td>Sim</td>
<td>Nome do portador do cartão.</td>
</tr>
<tr>
<td><code class="prettyprint">customer.document</code></td>
<td>Texto</td>
<td>18</td>
<td>Sim</td>
<td>Número do CPF/CNPJ do portador do cartão.</td>
</tr>
<tr>
<td><code class="prettyprint">customer.email</code></td>
<td>Texto</td>
<td>100</td>
<td>Sim</td>
<td>Email do portador do cartão.</td>
</tr>
<tr>
<td><code class="prettyprint">address.address</code></td>
<td>Texto</td>
<td>60</td>
<td>Sim</td>
<td>Endereço do comprador.</td>
</tr>
<tr>
<td><code class="prettyprint">address.number</code></td>
<td>Texto</td>
<td>10</td>
<td>Sim</td>
<td>Número do endereço do comprador.</td>
</tr>
<tr>
<td><code class="prettyprint">address.district</code></td>
<td>Texto</td>
<td>80</td>
<td>Sim</td>
<td>Bairro do comprador.</td>
</tr>
<tr>
<td><code class="prettyprint">address.zipcode</code></td>
<td>Número</td>
<td>8</td>
<td>Sim</td>
<td>CEP do comprador.</td>
</tr>
<tr>
<td><code class="prettyprint">address.city</code></td>
<td>Texto</td>
<td>30</td>
<td>Sim</td>
<td>Cidade do comprador.</td>
</tr>
<tr>
<td><code class="prettyprint">address.state</code></td>
<td>Texto</td>
<td>2</td>
<td>Sim</td>
<td>Sigla do estado do comprador.</td>
</tr>
<tr>
<td><code class="prettyprint">card.type</code></td>
<td>Inteiro</td>
<td>—</td>
<td>Não</td>
<td>0 Default, configura as opcões disponíveis. 1 Configura cartão de crédito. 2 Configura cartão de débito.</td>
</tr>
<tr>
<td><code class="prettyprint">card.capture</code></td>
<td>Booleano</td>
<td>—</td>
<td>Não</td>
<td><strong>true</strong> = Autoriza e confirma a transação. <strong>false</strong> = Autorização, mas não confirma a transação, necessitando realizar a confirmação (<a href="#captura">Captura</a>) noutra requisição.</td>
</tr>
<tr>
<td><code class="prettyprint">card.installments</code></td>
<td>Número</td>
<td>20</td>
<td>Sim</td>
<td>Número de parcelas.</td>
</tr>
<tr>
<td><code class="prettyprint">card.fixedInstallments</code></td>
<td>Booleano</td>
<td>—</td>
<td>Não</td>
<td><strong>True</strong> = não permite que o comprador selecione a quantidade de parcelas no formulário de pagamento.</td>
</tr>
<tr>
<td><code class="prettyprint">card.interestType</code></td>
<td>Número</td>
<td>1</td>
<td>Sim</td>
<td>Operações disponíveis: <BR /> 3. Parcelado Loja <BR /> 4. Parcelado Administrador</td>
</tr>
<tr>
<td><code class="prettyprint">card.authenticate</code></td>
<td>Texto</td>
<td>20</td>
<td>Sim</td>
<td>Opções disponíveis: <BR /> 1. Autorizar só transações autenticadas <BR /> 2. Autorizar transações autenticadas ou não autenticadas <BR /> 3. Autorizar sem autenticação <BR /></td>
</tr>
<tr>
<td><code class="prettyprint">card.softDescriptor</code></td>
<td>Texto</td>
<td>22</td>
<td>Não</td>
<td>Texto a ser exibido na fatura do portador do cartão.</td>
</tr>
<tr>
<td><code class="prettyprint">card.saveCard</code></td>
<td>Booleano</td>
<td>—</td>
<td>Não</td>
<td>Configura salvar o cartão (tokenização).</td>
</tr>
<tr>
<td><code class="prettyprint">electronicTransfer.provider</code></td>
<td>Texto</td>
<td>20</td>
<td>Sim</td>
<td>Nome da instituição responsável pela transferência.</td>
</tr>
<tr>
<td><code class="prettyprint">bankSlip.expirationDate</code></td>
<td>Texto</td>
<td>20</td>
<td>Sim</td>
<td>Data de vencimento do boleto. formato <strong>YYYY-MM-DD</strong></td>
</tr>
<tr>
<td><code class="prettyprint">bankSlip.instructions</code></td>
<td>Texto</td>
<td>300</td>
<td>Sim</td>
<td>Instruções do boleto.</td>
</tr>
<tr>
<td><code class="prettyprint">bankSlip.guarantor</code></td>
<td>Texto</td>
<td>45</td>
<td>Sim</td>
<td>Nome do avalista.</td>
</tr>
<tr>
<td><code class="prettyprint">bankSlip.provider</code></td>
<td>Texto</td>
<td>20</td>
<td>Sim</td>
<td>Nome da instituição financeira :<ul><li><strong>BRADESCO</strong></li><li><strong>ITAU</strong></li></ul></td>
</tr>
</tbody></table>

<h3 id="resposta-sucesso">RESPOSTA SUCESSO</h3>

<p>Status : 201</p>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"transactionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b9bb32a8-401e-41a0-a9ee-af9e8ab0de92"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.2all.com.br.com.br/v1/payment/b9bb32a8-401e-41a0-a9ee-af9e8ab0de92"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Falha</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"error"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"amount O campo amount e obrigatorio."</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<table><thead>
<tr>
<th>Propriedade</th>
<th>Tipo</th>
<th>Tamanho</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">transactionId</code></td>
<td>Texto</td>
<td>36</td>
<td>Identificador da transação do GATE2all.</td>
</tr>
<tr>
<td><code class="prettyprint">url</code></td>
<td>Texto</td>
<td>150</td>
<td>URL da intenção.</td>
</tr>
</tbody></table>

<aside class="success">
Redirecione o comprador para a URL da resposta.
</aside>

<h2 id="acessando-uma-inten-o-de-venda">Acessando uma intenção de venda</h2>

<p>Após o usuario acessar a URL gerada, aparecerá a seguinte tela de pagamento:</p>

<p><img src="images/intencao01.png" /></p>

<p>Caso a forma de pagamento escolhida pelo usuário for cartão de crédito, aparecerá a seguinte tela:</p>

<p><img src="images/intencao02.png" /></p>

<p>Após a conclusão do preenchimento do formulário o GATE2all enviará uma notificação contendo o <code class="prettyprint">transactionId</code> e o <code class="prettyprint">referenceId</code> para o sistema do lojista realizar a <a href="#consulta">consulta</a> da transação notificada.</p>

<p>Caso a forma de pagamento escolhida pelo usuário for boleto, aparecerá a seguinte tela:</p>

<p><img src="images/intencao03.png" /></p>

<p>Caso a forma de pagamento escolhida pelo usuário for transferência, aparecerá a seguinte tela:</p>

<p><img src="images/intencao04.png" /></p>

<p>Em caso de erro ou token incorreto aparecerá a seguinte tela:</p>

<p><img src="images/intencao05.png" /></p>

<h2 id="customizar-tema-dos-formul-rios">Customizar tema dos formulários</h2>

<p>Utilizando nossos formulários que capturam os dados do cartão é possível customizar logo, cor de fundo, cor do formulário, cor das fontes, botão do envio e a cor do rodapé. </p>

<p>Para customizar os formulários acesse o <a href="https://gate.2all.com.br">painel de controle</a> e clique no menu <a href="https://gate.2all.com.br/ntk/configuracao-cliente"><strong>&ldquo;Configurações&gt;Formulário de pagamento&rdquo;</strong></a>.</p>

<h1 id="gate2all-integrado">GATE2all Integrado</h1>

<p><code class="prettyprint">(CHECKOUT TRANSPARENTE)</code></p>

<p>Neste modelo todo o relacionamento com o usuário é realizado pela loja virtual, inclusive eventual
captura de dados de cartões de crédito. Portanto sua loja virtual deverá ser homologada PCI, para
maiores informações consulte o site https://www.pcisecuritystandards.org</p>

<p>A loja virtual deve fazer a captura de todos os dados necessários e submetê-los ao <strong>GATE2all</strong>.</p>

<h2 id="autoriza-o">Autorização</h2>

<p>Para criar uma autorização é necessário enviar um POST para o seguinte recurso:</p>

<aside class="notice">
Para se recuperar eventuais problemas com TIME OUT nas requisições, recomendamos a consulta pelo número do pedido `referenceId` ou criando uma [intenção](#inteno-de-venda) e informando o mesmo `transactionId` na requisição com os dados do cartão. Desta maneira é possível realizar uma consulta para verificar o status da transação. 
</aside>

<h3 id="requisi-o">REQUISIÇÃO</h3>

<aside class="request"><span class="method post">POST</span> <span class="endpoint">/v1/transactions</span></aside>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
   </span><span class="nt">"referenceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19893211234"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Mouse sem fio"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"customer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Comprador Teste"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"document"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345678909"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nt">"payment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
       </span><span class="nt">"card"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"capture"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nt">"installments"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
          </span><span class="nt">"interestType"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
          </span><span class="nt">"authenticate"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
          </span><span class="nt">"softDescriptor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Pagamento Gate2all"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"saveCard"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nt">"cardInfo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4539708473330561"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"expirationMonth"</span><span class="p">:</span><span class="w"> </span><span class="s2">"04"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"expirationYear"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"cvv"</span><span class="p">:</span><span class="w"> </span><span class="s2">"234"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"brand"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VISA"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"holderName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HOLDER NAME"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre class="highlight shell"><code></code></pre>
<pre class="highlight java"><code>
<span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>

<span class="n">URL</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"https://api.2all.com.br/v1/transactions"</span><span class="o">);</span>
<span class="n">HttpURLConnection</span> <span class="n">con</span> <span class="o">=</span> <span class="o">(</span><span class="n">HttpURLConnection</span><span class="o">)</span> <span class="n">obj</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>

<span class="n">con</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"content-type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"authenticationapi"</span><span class="o">,</span> <span class="s">"demo"</span><span class="o">);</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"authenticationkey"</span><span class="o">,</span> <span class="s">"demo"</span><span class="o">);</span>

<span class="n">String</span> <span class="n">body</span> <span class="o">=</span> <span class="s">"{"</span>
        <span class="o">+</span> <span class="s">"\"referenceId\": \"123456\","</span>
        <span class="o">+</span> <span class="s">"\"amount\": \"100\","</span>
        <span class="o">+</span> <span class="s">"\"description\": \"Venda Teste\","</span>
        <span class="o">+</span> <span class="s">"\"postBackUrl\": \"http://url-notificacao\","</span>
        <span class="o">+</span> <span class="s">"\"customer\": {"</span>
        <span class="o">+</span> <span class="s">"    \"name\": \"COMPRADOR TESTE\","</span>
        <span class="o">+</span> <span class="s">"     \"document\": \"23650403811\""</span>
        <span class="o">+</span> <span class="s">"},"</span>
        <span class="o">+</span> <span class="s">" \"payment\": {"</span>
        <span class="o">+</span> <span class="s">"    \"card\": {"</span>
        <span class="o">+</span> <span class="s">"        \"type\": 1,"</span>
        <span class="o">+</span> <span class="s">"        \"capture\": false,"</span>
        <span class="o">+</span> <span class="s">"        \"installments\": 1,"</span>
        <span class="o">+</span> <span class="s">"        \"interestType\": 3,"</span>
        <span class="o">+</span> <span class="s">"        \"authenticate\": 3,"</span>
        <span class="o">+</span> <span class="s">"        \"saveCard\": false,"</span>
        <span class="o">+</span> <span class="s">"        \"softDescriptor\": \"Gate2All\","</span>
        <span class="o">+</span> <span class="s">"        \"cardInfo\": {"</span>
        <span class="o">+</span> <span class="s">"           \"number\": \"4556326359707410\","</span>
        <span class="o">+</span> <span class="s">"           \"expirationMonth\": \"04\","</span>
        <span class="o">+</span> <span class="s">"           \"expirationYear\": \"2018\","</span>
        <span class="o">+</span> <span class="s">"           \"cvv\": \"6434\","</span>
        <span class="o">+</span> <span class="s">"           \"brand\": \"VISA\","</span>
        <span class="o">+</span> <span class="s">"           \"holderName\": \"COMPRADOR TESTE\""</span>
        <span class="o">+</span> <span class="s">"        }"</span>
        <span class="o">+</span> <span class="s">"      }"</span>
        <span class="o">+</span> <span class="s">"   }"</span>
        <span class="o">+</span> <span class="s">"}"</span><span class="o">;</span>

<span class="n">con</span><span class="o">.</span><span class="na">setDoOutput</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
<span class="n">DataOutputStream</span> <span class="n">dos</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DataOutputStream</span><span class="o">(</span><span class="n">con</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">());</span>
<span class="n">dos</span><span class="o">.</span><span class="na">writeBytes</span><span class="o">(</span><span class="n">body</span><span class="o">);</span>
<span class="n">dos</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
<span class="n">dos</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

<span class="n">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Scanner</span><span class="o">(</span><span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">con</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">())));</span>
<span class="n">String</span> <span class="n">response</span> <span class="o">=</span> <span class="n">scanner</span><span class="o">.</span><span class="na">nextLine</span><span class="o">();</span>
<span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">);</span>

</code></pre>

<table><thead>
<tr>
<th>Propriedade</th>
<th>Tipo</th>
<th>Tamanho</th>
<th>Obrigatório</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">transactionId</code></td>
<td>Texto</td>
<td>150</td>
<td>Não</td>
<td>Identificador da transação do GATE2all.</td>
</tr>
<tr>
<td><code class="prettyprint">referenceId</code></td>
<td>Texto</td>
<td>100</td>
<td>Sim</td>
<td>Número de identificação da loja.</td>
</tr>
<tr>
<td><code class="prettyprint">amount</code></td>
<td>Número</td>
<td>16</td>
<td>Sim</td>
<td>Valor da transação sem pontuação. Os dois últimos dígitos são os centavos. (Ex: amount: 100 = R$ 1,00)</td>
</tr>
<tr>
<td><code class="prettyprint">description</code></td>
<td>Texto</td>
<td>300</td>
<td>Não</td>
<td>Descrição da transação.</td>
</tr>
<tr>
<td><code class="prettyprint">postBackUrl</code></td>
<td>Texto</td>
<td>—</td>
<td>Não</td>
<td>URL onde o GATE2all notificará eventuais status da trancação para o lojista.</td>
</tr>
<tr>
<td><code class="prettyprint">customer.name</code></td>
<td>Texto</td>
<td>100</td>
<td>Sim</td>
<td>Nome do portador do cartão.</td>
</tr>
<tr>
<td><code class="prettyprint">customer.document</code></td>
<td>Texto</td>
<td>18</td>
<td>Não</td>
<td>Número do CPF/CNPJ do portador do cartão.</td>
</tr>
<tr>
<td><code class="prettyprint">card.type</code></td>
<td>Inteiro</td>
<td>—</td>
<td>Sim</td>
<td>Configura as opcões disponíveis. 1 Configura cartão de crédito. 2</td>
</tr>
<tr>
<td><code class="prettyprint">card.softDescriptor</code></td>
<td>Texto</td>
<td>22</td>
<td>Não</td>
<td>Texto a ser exibido na fatura do portador do cartão.</td>
</tr>
<tr>
<td><code class="prettyprint">card.capture</code></td>
<td>Booleano</td>
<td>—</td>
<td>Sim</td>
<td><strong>true</strong> = Autoriza e confirma a transação . <strong>false</strong> = Autorização, mas não confirma a transação, necessitando realizar a confirmação (<a href="#captura">Captura</a>) noutra requisição.</td>
</tr>
<tr>
<td><code class="prettyprint">card.installments</code></td>
<td>Número</td>
<td>2</td>
<td>Sim</td>
<td>Número de parcelas.</td>
</tr>
<tr>
<td><code class="prettyprint">card.interestType</code></td>
<td>Número</td>
<td>1</td>
<td>Sim</td>
<td>Operações disponíveis: <BR /> 3. Parcelado Loja <BR /> 4. Parcelado Administrador</td>
</tr>
<tr>
<td><code class="prettyprint">card.authenticate</code></td>
<td>Número</td>
<td>1</td>
<td>Sim</td>
<td>Opções disponíveis: <BR /> 1. Autorizar só transações autenticadas <BR /> 2. Autorizar transações autenticadas ou não autenticadas <BR /> 3. Autorizar sem autenticação <BR /></td>
</tr>
<tr>
<td><code class="prettyprint">card.provider</code></td>
<td>Número</td>
<td>—</td>
<td>Não</td>
<td>Nome do Meio de Pagamento - (OBS: funcionalidade ainda não disponível)</td>
</tr>
<tr>
<td><code class="prettyprint">card.saveCard</code></td>
<td>Booleano</td>
<td>—</td>
<td>Não</td>
<td>Configura salvar o cartão (tokenização).</td>
</tr>
<tr>
<td><code class="prettyprint">cardInfo.number</code></td>
<td>Texto</td>
<td>19</td>
<td>Sim</td>
<td>Número do cartão.</td>
</tr>
<tr>
<td><code class="prettyprint">cardInfo.expirationMonth</code></td>
<td>Número</td>
<td>2</td>
<td>Sim</td>
<td>Mês da validade do cartão.</td>
</tr>
<tr>
<td><code class="prettyprint">cardInfo.expirationYear</code></td>
<td>Número</td>
<td>2</td>
<td>Sim</td>
<td>Ano da validade do cartão.</td>
</tr>
<tr>
<td><code class="prettyprint">cardInfo.cvv</code></td>
<td>Número</td>
<td>4</td>
<td>Não</td>
<td>Código de segurança do cartão.</td>
</tr>
<tr>
<td><code class="prettyprint">cardInfo.brand</code></td>
<td>Texto</td>
<td>20</td>
<td>Sim</td>
<td>Bandeira do cartão.<a href="#bandeiras">Bandeiras</a>.</td>
</tr>
<tr>
<td><code class="prettyprint">cardInfo.holderName</code></td>
<td>Texto</td>
<td>20</td>
<td>Não</td>
<td>Nome do portador do cartão.</td>
</tr>
</tbody></table>

<h3 id="resposta">RESPOSTA</h3>

<blockquote>
<p>Transação autorizada e não capturada</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"transactionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"92d50ba4-5d93-4ee5-90e8-9884b250310a"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"referenceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1463697571584"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TV LG 42"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
  </span><span class="nt">"dtTransaction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-05T12:04:20"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"payment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"card"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CIELO"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"authenticationECI"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
      </span><span class="nt">"codAuthorization"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"providerReference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1006993069000834928A"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"providerCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"providerMessage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Transação autorizada"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"softDescriptor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EC02"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"interestType"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="nt">"integrationType"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"installments"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"capture"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"authenticate"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="nt">"saveCard"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"cardInfo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"453970******0561"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"expirationMonth"</span><span class="p">:</span><span class="w"> </span><span class="s2">"04"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"expirationYear"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"cvv"</span><span class="p">:</span><span class="w"> </span><span class="s2">"***"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"brand"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VISA"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"holderName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HOLDER NAME"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"customer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HOLDER NAME"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"document"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345678909"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre class="highlight shell"><code></code></pre>

<blockquote>
<p>Falha</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"error"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"O campo amount e obrigatorio."</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre class="highlight shell"><code></code></pre>

<table><thead>
<tr>
<th>Propriedade</th>
<th>Tipo</th>
<th>Tamanho</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">transactionId</code></td>
<td>Texto</td>
<td>150</td>
<td>Identificador da transação do GATE2all.</td>
</tr>
<tr>
<td><code class="prettyprint">dtTransaction</code></td>
<td>DataHora</td>
<td>19</td>
<td>Data e hora da transação.</td>
</tr>
<tr>
<td><code class="prettyprint">card.provider</code></td>
<td>Texto</td>
<td>100</td>
<td>Nome da instituição financeira.</td>
</tr>
<tr>
<td><code class="prettyprint">card.providerReference</code></td>
<td>Texto</td>
<td>100</td>
<td>Referência da instituição.</td>
</tr>
<tr>
<td><code class="prettyprint">card.providerMessage</code></td>
<td>Texto</td>
<td>100</td>
<td>Mensagem da instituição.</td>
</tr>
<tr>
<td><code class="prettyprint">card.providerCode</code></td>
<td>Texto</td>
<td>100</td>
<td>Codigo de resposta da instituição.</td>
</tr>
<tr>
<td><code class="prettyprint">card.codAuthorization</code></td>
<td>Texto</td>
<td>100</td>
<td>Codigo de autorização da instituição.</td>
</tr>
<tr>
<td><code class="prettyprint">card.authenticationECI</code></td>
<td>Texto</td>
<td>100</td>
<td>Indicador de autenticação da transação.<a href="#status-eci">Códigos ECI</a></td>
</tr>
<tr>
<td><code class="prettyprint">status</code></td>
<td>Número</td>
<td>2</td>
<td>Status da transação retornado pelo GATE2all <a href="#status">catálogo</a>.</td>
</tr>
</tbody></table>

<h2 id="boleto">Boleto</h2>

<p>O boleto bancário ou bloqueto é um método de pagamento de produtos ou serviços. É amplamente utilizado por empresas no Brasil.</p>

<p>Entidades envolvidas: “Banco” que são as instituições financeiras responsáveis pela emissão, recebimento e pagamento do boleto, “Cedente” é quem solicita a emissão do documento de cobrança e o que receberá o valor do pagamento e o “Sacado” que é consumidor do produto ou serviço, ou seja, quem paga o boleto.</p>

<p>Como é o processo de pagamento com boleto bancário:</p>

<ol>
<li>Cedente encaminha para o Sacado o Boleto</li>
<li>Sacado efetua o pagamento até a data de vencimento estipulada.</li>
<li>Banco recebe o valor e repassa para conta do Cedente.</li>
<li>Banco aplica a taxa acordada entre as partes.</li>
</ol>

<h3 id="requisi-o">Requisição</h3>

<aside class="request"><span class="method post">POST</span> <span class="endpoint">/v1/transactions</span></aside>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
   </span><span class="nt">"referenceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19893211234"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Produto ou serviço"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"customer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Comprador"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"document"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345678909"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"email"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"comprador@email.com"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"address"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"address"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Endereco"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"number"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"district"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Vila Olimpia"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"zipcode"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"09878675"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"city"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Sao Paulo"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"state"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"SP"</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nt">"payment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
       </span><span class="nt">"bankSlip"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"expirationDate"</span><span class="w"> </span><span class="p">:</span><span class="s2">"2017-03-01"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"instructions"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Aceitar somente até a data de vencimento, após essa data juros de 1% dia"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"guarantor"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Comprador"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"provider"</span><span class="p">:</span><span class="s2">"Itau"</span><span class="w">
       </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre class="highlight shell"><code></code></pre>
<pre class="highlight java"><code>
<span class="kn">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.DataOutputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStreamReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>

<span class="n">URL</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"https://api.2all.com.br/v1/transactions"</span><span class="o">);</span>
<span class="n">HttpURLConnection</span> <span class="n">con</span> <span class="o">=</span> <span class="o">(</span><span class="n">HttpURLConnection</span><span class="o">)</span> <span class="n">obj</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>

<span class="n">con</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"content-type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"authenticationapi"</span><span class="o">,</span> <span class="s">"demo"</span><span class="o">);</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"authenticationkey"</span><span class="o">,</span> <span class="s">"demo"</span><span class="o">);</span>

<span class="n">String</span> <span class="n">body</span> <span class="o">=</span> <span class="s">"{"</span>
        <span class="o">+</span> <span class="s">"\"referenceId\": \"123456789\","</span>
        <span class="o">+</span> <span class="s">"\"amount\": \"100\","</span>
        <span class="o">+</span> <span class="s">"\"description\": \"TV LG 42\","</span>
        <span class="o">+</span> <span class="s">"\"postBackUrl\": \"http://url-notificacao\","</span>
        <span class="o">+</span> <span class="s">"\"customer\": {"</span>
        <span class="o">+</span> <span class="s">"    \"name\": \"COMPRADOR TEST\","</span>
        <span class="o">+</span> <span class="s">"    \"document\": \"12345678909\","</span>
        <span class="o">+</span> <span class="s">"    \"email\" : \"comprador@ntk.com\","</span>
        <span class="o">+</span> <span class="s">"    \"address\" : {"</span>
        <span class="o">+</span> <span class="s">"        \"address\" : \"Rua Fidencio Ramos\","</span>
        <span class="o">+</span> <span class="s">"        \"number\": \" 100\","</span>
        <span class="o">+</span> <span class="s">"        \"district\" : \"Vila Olimpia\","</span>
        <span class="o">+</span> <span class="s">"        \"zipcode\" : \"05890090\","</span>
        <span class="o">+</span> <span class="s">"        \"city\" : \"Sao Paulo\","</span>
        <span class="o">+</span> <span class="s">"        \"state\" : \"SP\""</span>
        <span class="o">+</span> <span class="s">"        }"</span>
        <span class="o">+</span> <span class="s">"    },"</span>
        <span class="o">+</span> <span class="s">"    \"payment\": {"</span>
        <span class="o">+</span> <span class="s">"        \"bankSlip\" : {"</span>
        <span class="o">+</span> <span class="s">"            \"expirationDate\" :\"2017-12-01\","</span>
        <span class="o">+</span> <span class="s">"            \"instructions\" : \"Aceitar somente ate a data de vencimento, apos essa data juros de 1% dia\","</span>
        <span class="o">+</span> <span class="s">"            \"guarantor\" : \"Joao da Silva\","</span>
        <span class="o">+</span> <span class="s">"            \"provider\":\"Itau\""</span>
        <span class="o">+</span> <span class="s">"        }"</span>
        <span class="o">+</span> <span class="s">"    }"</span>
        <span class="o">+</span> <span class="s">"}"</span><span class="o">;</span>

<span class="n">con</span><span class="o">.</span><span class="na">setDoOutput</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
<span class="n">DataOutputStream</span> <span class="n">dos</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DataOutputStream</span><span class="o">(</span><span class="n">con</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">());</span>
<span class="n">dos</span><span class="o">.</span><span class="na">writeBytes</span><span class="o">(</span><span class="n">body</span><span class="o">);</span>
<span class="n">dos</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
<span class="n">dos</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

<span class="n">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Scanner</span><span class="o">(</span><span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">con</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">())));</span>
<span class="n">String</span> <span class="n">response</span> <span class="o">=</span> <span class="n">scanner</span><span class="o">.</span><span class="na">nextLine</span><span class="o">();</span>
<span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">);</span>


</code></pre>

<table><thead>
<tr>
<th>Propriedade</th>
<th style="text-align: center">Tipo</th>
<th style="text-align: center">Tamanho</th>
<th style="text-align: center">Obrigatório</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">transactionId</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">150</td>
<td style="text-align: center">Não</td>
<td>Utilize somente para intenções de venda previamente configuradas</td>
</tr>
<tr>
<td><code class="prettyprint">referenceId</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">100</td>
<td style="text-align: center">Sim</td>
<td>Número de identificação da loja.</td>
</tr>
<tr>
<td><code class="prettyprint">amount</code></td>
<td style="text-align: center">Número</td>
<td style="text-align: center">16</td>
<td style="text-align: center">Sim</td>
<td>Valor da transação sem pontuação. Os dois últimos dígitos são os centavos. (Ex: amount: 100 = R$ 1,00)</td>
</tr>
<tr>
<td><code class="prettyprint">description</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">300</td>
<td style="text-align: center">Não</td>
<td>Descrição da transação.</td>
</tr>
<tr>
<td><code class="prettyprint">customer.name</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">100</td>
<td style="text-align: center">Sim</td>
<td>Nome do portador do cartão.</td>
</tr>
<tr>
<td><code class="prettyprint">customer.document</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">18</td>
<td style="text-align: center">Sim</td>
<td>Número do CPF/CNPJ do portador do cartão.</td>
</tr>
<tr>
<td><code class="prettyprint">customer.email</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">100</td>
<td style="text-align: center">Sim</td>
<td>Email do portador do cartão.</td>
</tr>
<tr>
<td><code class="prettyprint">address.address</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">60</td>
<td style="text-align: center">Sim</td>
<td>Endereço do comprador.</td>
</tr>
<tr>
<td><code class="prettyprint">address.number</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">10</td>
<td style="text-align: center">Sim</td>
<td>Número do comprador.</td>
</tr>
<tr>
<td><code class="prettyprint">address.district</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">80</td>
<td style="text-align: center">Sim</td>
<td>Bairro do comprador.</td>
</tr>
<tr>
<td><code class="prettyprint">address.zipcode</code></td>
<td style="text-align: center">Número</td>
<td style="text-align: center">8</td>
<td style="text-align: center">Sim</td>
<td>CEP do comprador.</td>
</tr>
<tr>
<td><code class="prettyprint">address.city</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">30</td>
<td style="text-align: center">Sim</td>
<td>Cidade do comprador.</td>
</tr>
<tr>
<td><code class="prettyprint">address.state</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">2</td>
<td style="text-align: center">Sim</td>
<td>Sigla do estado do comprador.</td>
</tr>
<tr>
<td><code class="prettyprint">bankSlip.expirationDate</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">20</td>
<td style="text-align: center">Sim</td>
<td>Data de vencimento do boleto. formato <strong>YYYY-MM-DD</strong></td>
</tr>
<tr>
<td><code class="prettyprint">bankSlip.instructions</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">300</td>
<td style="text-align: center">Sim</td>
<td>Instruções do boleto.</td>
</tr>
<tr>
<td><code class="prettyprint">bankSlip.guarantor</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">45</td>
<td style="text-align: center">Sim</td>
<td>Nome do avalista.</td>
</tr>
<tr>
<td><code class="prettyprint">bankSlip.provider</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">20</td>
<td style="text-align: center">Sim</td>
<td>Nome da instituição financeira :<ul><li><strong>BRADESCO</strong></li><li><strong>ITAU</strong></li></ul></td>
</tr>
</tbody></table>

<h3 id="resposta">RESPOSTA</h3>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"transactionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7365ca65-70d4-4d7c-ac3d-a20f5730c241"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"referenceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19893211234"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Produto ou serviço"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"dtTransaction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-08T10:46:31-0300"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"customer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Comprador"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"document"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345678909"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"comprador@email.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Endereco"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"district"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Vila Olimpia"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"zipcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"09878675"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sao Paulo"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SP"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"payment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"bankSlip"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"providerReference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20575112"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"providerCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"providerMessage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Transação iniciada"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"emissionDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-08"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"expirationDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-10"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"instructions"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Aceitar somente até a data de vencimento, após essa data juros de 1% dia"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"guarantor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Comprador"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ITAU"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"paymentDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-10"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"paymentAmount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.2all.com.br.com.br/v1/url-payment/6400d988-cc4b-4084-80ee-d5575dbbed4d"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre class="highlight shell"><code></code></pre>

<table><thead>
<tr>
<th>Propriedade</th>
<th style="text-align: center">Tipo</th>
<th style="text-align: center">Tamanho</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">transactionId</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">150</td>
<td>Identificador da transação do GATE2all.</td>
</tr>
<tr>
<td><code class="prettyprint">dtTransaction</code></td>
<td style="text-align: center">DataHora</td>
<td style="text-align: center">19</td>
<td>Data e hora da transação.</td>
</tr>
<tr>
<td><code class="prettyprint">bankSlip.emissionDate</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">20</td>
<td>Data de emissão do boleto. formato <strong>YYYY-MM-DD</strong></td>
</tr>
<tr>
<td><code class="prettyprint">bankSlip.paymentDate</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">20</td>
<td>Data de pagamento do boleto. formato <strong>YYYY-MM-DD</strong></td>
</tr>
<tr>
<td><code class="prettyprint">bankSlip.paymentAmount</code></td>
<td style="text-align: center">Número</td>
<td style="text-align: center">16</td>
<td>Valor de pagamento do boleto sem pontuação. Os dois últimos dígitos são os centavos. (Ex: amount: 100 = R$ 1,00)</td>
</tr>
<tr>
<td><code class="prettyprint">bankSlip.url</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">300</td>
<td>Endereço de acesso da transação.</td>
</tr>
<tr>
<td><code class="prettyprint">bankSlip.providerReference</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">100</td>
<td>Referência da instituição.</td>
</tr>
<tr>
<td><code class="prettyprint">bankSlip.providerCode</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">100</td>
<td>Codigo de resposta da instituição.</td>
</tr>
<tr>
<td><code class="prettyprint">bankSlip.providerMessage</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">100</td>
<td>Mensagem da instituição.</td>
</tr>
<tr>
<td><code class="prettyprint">status</code></td>
<td style="text-align: center">Número</td>
<td style="text-align: center">2</td>
<td><a href="#status">tabela de Status</a></td>
</tr>
</tbody></table>

<h2 id="transfer-ncia-entre-contas-banc-rias">Transferência entre contas bancárias</h2>

<p>Este tipo de transação permite a transferência de valores entre contas do bancos Bradesco e Itaú, a compensação é realizada no mesmo dia. Esse meio de pagamento direciona o comprador para o Internet Bank para realizar o processo de autenticação.</p>

<p>No momento do pagamento, o cliente comprador informa os dados da agência, informa os dados da conta, como senha de 4 dígitos e do dispositivo de segurança (Cartão Chave de Segurança, token ou - versão Eletrônica ou no Celular.</p>

<h3 id="requisi-o">Requisição</h3>

<aside class="request"><span class="method post">POST</span> <span class="endpoint">/v1/transactions</span></aside>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"referenceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19893211234"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Produto ou serviço"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"customer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Comprador"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"document"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345678909"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"comprador@email.com"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Endereco 100"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"number"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"district"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Vila Olimpia"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"zipcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"05890090"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sao Paulo"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SP"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
   </span><span class="nt">"payment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
       </span><span class="nt">"electronicTransfer"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
           </span><span class="nt">"provider"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Itau"</span><span class="w">
       </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre class="highlight shell"><code></code></pre>
<pre class="highlight java"><code>
<span class="kn">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.DataOutputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStreamReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>

<span class="n">URL</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"https://api.2all.com.br/v1/transactions"</span><span class="o">);</span>
<span class="n">HttpURLConnection</span> <span class="n">con</span> <span class="o">=</span> <span class="o">(</span><span class="n">HttpURLConnection</span><span class="o">)</span> <span class="n">obj</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>

<span class="n">con</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"content-type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"authenticationapi"</span><span class="o">,</span> <span class="s">"demo"</span><span class="o">);</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"authenticationkey"</span><span class="o">,</span> <span class="s">"demo"</span><span class="o">);</span>

<span class="n">String</span> <span class="n">body</span> <span class="o">=</span> <span class="s">"{"</span>
        <span class="o">+</span> <span class="s">"\"referenceId\": \"123456789\","</span>
        <span class="o">+</span> <span class="s">"\"amount\": \"100\","</span>
        <span class="o">+</span> <span class="s">"\"description\": \"TV LG 42\","</span>
        <span class="o">+</span> <span class="s">"    \"customer\": {"</span>
        <span class="o">+</span> <span class="s">"       \"name\": \"COMPRADOR TESTE\","</span>
        <span class="o">+</span> <span class="s">"       \"document\": \"12345678909\","</span>
        <span class="o">+</span> <span class="s">"       \"email\" : \"comprador@ntk.com\","</span>
        <span class="o">+</span> <span class="s">"           \"address\" : {"</span>
        <span class="o">+</span> <span class="s">"               \"address\" : \"Rua Fidencio Ramos 100\","</span>
        <span class="o">+</span> <span class="s">"               \"district\" : \"Vila Olimpia\","</span>
        <span class="o">+</span> <span class="s">"               \"zipcode\" : \"05890090\","</span>
        <span class="o">+</span> <span class="s">"               \"city\" : \"Sao Paulo\","</span>
        <span class="o">+</span> <span class="s">"               \"state\" : \"SP\""</span>
        <span class="o">+</span> <span class="s">"      }"</span>
        <span class="o">+</span> <span class="s">"   },"</span>
        <span class="o">+</span> <span class="s">"   \"payment\": {"</span>
        <span class="o">+</span> <span class="s">"       \"electronicTransfer\" : {"</span>
        <span class="o">+</span> <span class="s">"          \"provider\" : \"Itau\""</span>
        <span class="o">+</span> <span class="s">"       }"</span>
        <span class="o">+</span> <span class="s">"    }"</span>
        <span class="o">+</span> <span class="s">"}"</span><span class="o">;</span>

<span class="n">con</span><span class="o">.</span><span class="na">setDoOutput</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
<span class="n">DataOutputStream</span> <span class="n">dos</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DataOutputStream</span><span class="o">(</span><span class="n">con</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">());</span>
<span class="n">dos</span><span class="o">.</span><span class="na">writeBytes</span><span class="o">(</span><span class="n">body</span><span class="o">);</span>
<span class="n">dos</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
<span class="n">dos</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

<span class="n">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Scanner</span><span class="o">(</span><span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">con</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">())));</span>
<span class="n">String</span> <span class="n">response</span> <span class="o">=</span> <span class="n">scanner</span><span class="o">.</span><span class="na">nextLine</span><span class="o">();</span>
<span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">);</span>


</code></pre>

<table><thead>
<tr>
<th>Propriedade</th>
<th style="text-align: center">Tipo</th>
<th style="text-align: center">Tamanho</th>
<th style="text-align: center">Obrigatório</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">transactionId</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">150</td>
<td style="text-align: center">Não</td>
<td>Utilize somente para intenções de venda previamente configuradas</td>
</tr>
<tr>
<td><code class="prettyprint">referenceId</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">100</td>
<td style="text-align: center">Sim</td>
<td>Número de identificação da loja.</td>
</tr>
<tr>
<td><code class="prettyprint">amount</code></td>
<td style="text-align: center">Número</td>
<td style="text-align: center">16</td>
<td style="text-align: center">Sim</td>
<td>Valor da transação sem pontuação. Os dois últimos dígitos são os centavos. (Ex: amount: 100 = R$ 1,00)</td>
</tr>
<tr>
<td><code class="prettyprint">description</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">300</td>
<td style="text-align: center">Não</td>
<td>Descrição da transação.</td>
</tr>
<tr>
<td><code class="prettyprint">customer.name</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">100</td>
<td style="text-align: center">Sim</td>
<td>Nome do portador do cartão.</td>
</tr>
<tr>
<td><code class="prettyprint">customer.document</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">18</td>
<td style="text-align: center">Sim</td>
<td>Número do CPF/CNPJ do portador do cartão.</td>
</tr>
<tr>
<td><code class="prettyprint">customer.email</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">100</td>
<td style="text-align: center">Sim</td>
<td>Email do portador do cartão.</td>
</tr>
<tr>
<td><code class="prettyprint">address.address</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">60</td>
<td style="text-align: center">Sim</td>
<td>Endereço do comprador.</td>
</tr>
<tr>
<td><code class="prettyprint">address.number</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">10</td>
<td style="text-align: center">Sim</td>
<td>Número do comprador.</td>
</tr>
<tr>
<td><code class="prettyprint">address.district</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">80</td>
<td style="text-align: center">Sim</td>
<td>Bairro do comprador.</td>
</tr>
<tr>
<td><code class="prettyprint">address.zipcode</code></td>
<td style="text-align: center">Número</td>
<td style="text-align: center">8</td>
<td style="text-align: center">Sim</td>
<td>CEP do comprador.</td>
</tr>
<tr>
<td><code class="prettyprint">address.city</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">30</td>
<td style="text-align: center">Sim</td>
<td>Cidade do comprador.</td>
</tr>
<tr>
<td><code class="prettyprint">address.state</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">2</td>
<td style="text-align: center">Sim</td>
<td>Sigla do estado do comprador.</td>
</tr>
<tr>
<td><code class="prettyprint">electronicTransfer.provider</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">20</td>
<td style="text-align: center">Sim</td>
<td>Nome da instituição financeira :<ul><li><strong>BRADESCO</strong></li><li><strong>ITAU</strong></li></ul></td>
</tr>
</tbody></table>

<h3 id="resposta">RESPOSTA</h3>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"transactionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6400d988-cc4b-4084-80ee-d5575dbbed4d"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"referenceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19893211234"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Produto ou serviço"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"dtTransaction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-05T16:16:14-0200"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"customer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Comprador"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"document"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345678909"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"comprador@email.com"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Endereco 100"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"number"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"district"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Vila Olimpia"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"zipcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"05890090"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sao Paulo"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SP"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"payment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"electronicTransfer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"providerReference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20518839"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Itau"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.2all.com.br.com.br/v1/url-payment/6400d988-cc4b-4084-80ee-d5575dbbed4d"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre class="highlight shell"><code></code></pre>

<table><thead>
<tr>
<th>Propriedade</th>
<th style="text-align: center">Tipo</th>
<th style="text-align: center">Tamanho</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">transactionId</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">150</td>
<td>Identificador da transação do GATE2all.</td>
</tr>
<tr>
<td><code class="prettyprint">dtTransaction</code></td>
<td style="text-align: center">DataHora</td>
<td style="text-align: center">19</td>
<td>Data e hora da transação.</td>
</tr>
<tr>
<td><code class="prettyprint">electronicTransfer.provider</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">20</td>
<td>Nome da instituição financeira :<ul><li><strong>BRADESCO</strong></li><li><strong>ITAU</strong></li></ul></td>
</tr>
<tr>
<td><code class="prettyprint">electronicTransfer.url</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">300</td>
<td>Endereço de acesso da transação.</td>
</tr>
<tr>
<td><code class="prettyprint">electronicTransfer.providerReference</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">100</td>
<td>Referência da instituição.</td>
</tr>
<tr>
<td><code class="prettyprint">status</code></td>
<td style="text-align: center">Número</td>
<td style="text-align: center">2</td>
<td><a href="#status">tabela de Status</a></td>
</tr>
</tbody></table>

<h1 id="captura">Captura</h1>

<p>Captura é a confirmação de uma transação autorizada, após a captura que é confirmada a transação entre lojista e comprador, gerando o crédito para o lojista e o lançamento do débito na fatura do portador do cartão.</p>

<h3 id="regras-da-captura">Regras da captura</h3>

<table><thead>
<tr>
<th>Rede adquirente</th>
<th>Prazo</th>
<th>Captura Parcial</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">Cielo</code></td>
<td>5 dias</td>
<td>Sim</td>
</tr>
<tr>
<td><code class="prettyprint">Rede(Komerci)</code></td>
<td>2 minutos</td>
<td>Não</td>
</tr>
<tr>
<td><code class="prettyprint">GetNet</code></td>
<td>20 dias</td>
<td>Sim</td>
</tr>
</tbody></table>

<ul>
<li><p>O prazo pode ser alterado para até 28 dias.</p></li>
<li><p>Transações de pré-autorização podem ser capturadas em até 30 dias.</p></li>
</ul>

<h3 id="requisi-o">Requisição</h3>

<aside class="request"><span class="method put">PUT</span> <span class="endpoint">/v1/transactions/{{transactionId}}/capture</span></aside>
<pre class="highlight java"><code>
<span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>

<span class="n">URL</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"https://api.2all.com.br/v1/transactions/{{transactionId}}/capture"</span><span class="o">);</span>
<span class="n">HttpURLConnection</span> <span class="n">con</span> <span class="o">=</span> <span class="o">(</span><span class="n">HttpURLConnection</span><span class="o">)</span> <span class="n">obj</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"PUT"</span><span class="o">);</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"content-type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"authenticationapi"</span><span class="o">,</span> <span class="s">"demo"</span><span class="o">);</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"authenticationkey"</span><span class="o">,</span> <span class="s">"demo"</span><span class="o">);</span>

<span class="n">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Scanner</span><span class="o">(</span><span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">con</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">())));</span>
<span class="n">String</span> <span class="n">response</span> <span class="o">=</span> <span class="n">scanner</span><span class="o">.</span><span class="na">nextLine</span><span class="o">();</span>
<span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">);</span>

</code></pre>

<table><thead>
<tr>
<th>Propriedade</th>
<th>Tipo</th>
<th>Tamanho</th>
<th>Obrigatório</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">transactionId</code></td>
<td>Texto</td>
<td>150</td>
<td>Sim</td>
<td>Identificador da transação do GATE2all.</td>
</tr>
</tbody></table>

<h3 id="resposta">RESPOSTA</h3>

<blockquote>
<p>Transação autorizada e capturada</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"transactionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"62f5a0b2-c632-4e4e-bc51-3b6681a54a3c"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"referenceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1488917347840"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
    </span><span class="nt">"dtTransaction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-07T17:09:07"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"payment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"card"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CIELO"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"authenticationECI"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
          </span><span class="nt">"codAuthorization"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"providerReference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100699306900094D905A"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"providerCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"providerMessage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Transacao capturada com sucesso"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"installments"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
          </span><span class="nt">"capture"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nt">"authenticate"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
          </span><span class="nt">"interestType"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
          </span><span class="nt">"integrationType"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
          </span><span class="nt">"saveCard"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nt">"cardInfo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"421847******1234"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"brand"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VISA"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"customer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HOLDER NAME"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"document"</span><span class="p">:</span><span class="w"> </span><span class="s2">"23650403811"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre class="highlight shell"><code></code></pre>

<h2 id="captura-parcial">Captura Parcial</h2>

<p>Para efetuar uma captura parcial, é necessário enviar um POST passando como parâmetro o valor a ser capturado.</p>

<h3 id="requisi-o">Requisição</h3>

<aside class="request"><span class="method put">PUT</span> <span class="endpoint">/v1/transactions/{{transactionId}}/capture?amount=100</span></aside>
<pre class="highlight java"><code>
<span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>

<span class="n">URL</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"https://api.2all.com.br/v1/transactions/{{transactionId}}/capture?amount=100"</span><span class="o">);</span>
<span class="n">HttpURLConnection</span> <span class="n">con</span> <span class="o">=</span> <span class="o">(</span><span class="n">HttpURLConnection</span><span class="o">)</span> <span class="n">obj</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"PUT"</span><span class="o">);</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"content-type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"authenticationapi"</span><span class="o">,</span> <span class="s">"demo"</span><span class="o">);</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"authenticationkey"</span><span class="o">,</span> <span class="s">"demo"</span><span class="o">);</span>

<span class="n">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Scanner</span><span class="o">(</span><span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">con</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">())));</span>
<span class="n">String</span> <span class="n">response</span> <span class="o">=</span> <span class="n">scanner</span><span class="o">.</span><span class="na">nextLine</span><span class="o">();</span>
<span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">);</span>

</code></pre>

<table><thead>
<tr>
<th>Propriedade</th>
<th>Tipo</th>
<th>Tamanho</th>
<th>Obrigatório</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">transactionId</code></td>
<td>Texto</td>
<td>150</td>
<td>Sim</td>
<td>Identificador da transação do GATE2all.</td>
</tr>
<tr>
<td><code class="prettyprint">amount</code></td>
<td>Número</td>
<td>16</td>
<td>Sim</td>
<td>Valor da transação a ser capturado sem pontuação. Os dois últimos dígitos são os centavos. (Ex: amount: 100 = R$ 1,00)</td>
</tr>
</tbody></table>

<h3 id="resposta">RESPOSTA</h3>

<blockquote>
<p>Transação autorizada e capturada</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"transactionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"62f5a0b2-c632-4e4e-bc51-3b6681a54a3c"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"referenceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1488917347840"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
    </span><span class="nt">"dtTransaction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-07T17:09:07"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"payment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"card"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CIELO"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"authenticationECI"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
          </span><span class="nt">"codAuthorization"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"providerReference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100699306900094D905A"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"providerCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"providerMessage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Transacao capturada com sucesso"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"installments"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
          </span><span class="nt">"capture"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nt">"authenticate"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
          </span><span class="nt">"interestType"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
          </span><span class="nt">"integrationType"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
          </span><span class="nt">"saveCard"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nt">"cardInfo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"421847******1234"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"brand"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VISA"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"customer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HOLDER NAME"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"document"</span><span class="p">:</span><span class="w"> </span><span class="s2">"23650403811"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre class="highlight shell"><code></code></pre>

<h1 id="cancelamento">Cancelamento</h1>

<p>Para realizar um cancelamento &ldquo;estorno&rdquo;, deve-se observar as seguintes condições:</p>

<h3 id="prazos-para-cancelamento">Prazos para cancelamento</h3>

<table><thead>
<tr>
<th>Rede adquirente</th>
<th>Prazo para cancelamento</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">Cielo</code></td>
<td>300 dias</td>
</tr>
<tr>
<td><code class="prettyprint">Rede(Komerci)</code></td>
<td>* Até às 23:59 a partir da data da transação. <BR /> * Pré-autorização prazo 15 dias.</td>
</tr>
<tr>
<td><code class="prettyprint">GetNet</code></td>
<td>Até 2 dias.</td>
</tr>
</tbody></table>

<h3 id="requisi-o">Requisição</h3>

<aside class="request"><span class="method put">PUT</span> <span class="endpoint">/v1/transactions/{{transactionId}}/void</span></aside>
<pre class="highlight java"><code>
<span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>

<span class="n">URL</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"https://api.2all.com.br/v1/transactions/957221f5-d08b-4445-9896-52152f31b846/void"</span><span class="o">);</span>
<span class="n">HttpURLConnection</span> <span class="n">con</span> <span class="o">=</span> <span class="o">(</span><span class="n">HttpURLConnection</span><span class="o">)</span> <span class="n">obj</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"PUT"</span><span class="o">);</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"content-type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"authenticationapi"</span><span class="o">,</span> <span class="s">"demo"</span><span class="o">);</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"authenticationkey"</span><span class="o">,</span> <span class="s">"demo"</span><span class="o">);</span>

<span class="n">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Scanner</span><span class="o">(</span><span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">con</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">())));</span>
<span class="n">String</span> <span class="n">response</span> <span class="o">=</span> <span class="n">scanner</span><span class="o">.</span><span class="na">nextLine</span><span class="o">();</span>
<span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">);</span>

</code></pre>

<table><thead>
<tr>
<th>Propriedade</th>
<th>Tipo</th>
<th>Tamanho</th>
<th>Obrigatório</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">transactionId</code></td>
<td>Texto</td>
<td>150</td>
<td>Sim</td>
<td>Identificador da transação do GATE2all.</td>
</tr>
</tbody></table>

<h3 id="resposta">RESPOSTA</h3>

<blockquote>
<p>Transação cancelada</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"transactionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"62f5a0b2-c632-4e4e-bc51-3b6681a54a3c"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"referenceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1488917347840"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="w">
    </span><span class="nt">"dtTransaction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-07T17:09:07"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"payment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"card"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"interestType"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
            </span><span class="nt">"integrationType"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nt">"installments"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nt">"capture"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nt">"authenticate"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
            </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CIELO"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"authenticationECI"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
            </span><span class="nt">"codAuthorization"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"providerReference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100699306900094D905A"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"providerCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"providerMessage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Transacao cancelada com sucesso"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"saveCard"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nt">"cardInfo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nt">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"421847******1234"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"brand"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VISA"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"customer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HOLDER NAME"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"document"</span><span class="p">:</span><span class="w"> </span><span class="s2">"23650403811"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre class="highlight shell"><code></code></pre>

<h1 id="consulta">Consulta</h1>

<p>Para realizar uma consulta é necessário enviar um GET para o seguinte recurso:</p>

<h3 id="requisi-o">Requisição</h3>

<aside class="request"><span class="method get">GET</span> <span class="endpoint">/v1/transactions/{{transactionId}}</span></aside>
<pre class="highlight java"><code>
<span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>

<span class="n">URL</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"https://api.2all.com.br/v1/transactions/d31dcd70-6666-40af-85ba-ed1ff23bc293"</span><span class="o">);</span>
<span class="n">HttpURLConnection</span> <span class="n">con</span> <span class="o">=</span> <span class="o">(</span><span class="n">HttpURLConnection</span><span class="o">)</span> <span class="n">obj</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"GET"</span><span class="o">);</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"content-type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"authenticationapi"</span><span class="o">,</span> <span class="s">"demo"</span><span class="o">);</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"authenticationkey"</span><span class="o">,</span> <span class="s">"demo"</span><span class="o">);</span>

<span class="n">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Scanner</span><span class="o">(</span><span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">con</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">())));</span>
<span class="n">String</span> <span class="n">response</span> <span class="o">=</span> <span class="n">scanner</span><span class="o">.</span><span class="na">nextLine</span><span class="o">();</span>
<span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">);</span>

</code></pre>

<table><thead>
<tr>
<th>Propriedade</th>
<th>Tipo</th>
<th>Tamanho</th>
<th>Obrigatório</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">transactionId</code></td>
<td>Texto</td>
<td>150</td>
<td>Sim</td>
<td>Identificador da transação do GATE2all.</td>
</tr>
</tbody></table>

<h3 id="resposta">RESPOSTA</h3>

<blockquote>
<p>Retorno Transação de Crédito.</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"transactionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"62f5a0b2-c632-4e4e-bc51-3b6681a54a3c"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"referenceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1488917347840"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="w">
  </span><span class="nt">"dtTransaction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-07T17:09:07"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"payment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"card"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"interestType"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="nt">"integrationType"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"installments"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"capture"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"authenticate"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="nt">"codAuthorization"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"providerReference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100699306900094D905A"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"saveCard"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"cardInfo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"421847******1234"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"brand"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VISA"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"customer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HOLDER NAME"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"document"</span><span class="p">:</span><span class="w"> </span><span class="s2">"23650403811"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Retorno Transação com Boleto</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"transactionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7365ca65-70d4-4d7c-ac3d-a20f5730c241"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"referenceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19893211234"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Produto ou serviço"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"dtTransaction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-08T10:46:31-0300"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"customer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Comprador"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"document"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345678909"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"comprador@email.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Endereco"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"district"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Vila Olimpia"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"zipcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"09878675"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sao Paulo"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SP"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"payment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"bankSlip"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"providerReference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20575112"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"emissionDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-08"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"expirationDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-10"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"instructions"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Aceitar somente até a data de vencimento, após essa data juros de 1% dia"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"guarantor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Comprador"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ITAU"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"paymentDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-10"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"paymentAmount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.2all.com.br.com.br/v1/url-payment/6400d988-cc4b-4084-80ee-d5575dbbed4d"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Retorno Transação com Transferência</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"transactionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6400d988-cc4b-4084-80ee-d5575dbbed4d"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"referenceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19893211234"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Produto ou serviço"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"dtTransaction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-05T16:16:14-0200"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"customer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Comprador"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"document"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345678909"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"comprador@email.com"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Endereco 100"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"number"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"district"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Vila Olimpia"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"zipcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"05890090"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sao Paulo"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SP"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"payment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"electronicTransfer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"providerReference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20518839"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Itau"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.2all.com.br.com.br/v1/url-payment/6400d988-cc4b-4084-80ee-d5575dbbed4d"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre class="highlight shell"><code></code></pre>

<table><thead>
<tr>
<th>Propriedade</th>
<th>Tipo</th>
<th>Tamanho</th>
<th>Obrigatório</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">referenceId</code></td>
<td>Texto</td>
<td>100</td>
<td>Sim</td>
<td>Número de identificação da loja.</td>
</tr>
<tr>
<td><code class="prettyprint">amount</code></td>
<td>Número</td>
<td>16</td>
<td>Sim</td>
<td>Valor da transação sem pontuação. Os dois últimos dígitos são os centavos. (Ex: amount: 100 = R$ 1,00)</td>
</tr>
<tr>
<td><code class="prettyprint">status</code></td>
<td>Número</td>
<td>2</td>
<td>Não</td>
<td>Status da transação retornado pelo gateway. <a href="#status">catálogo</a></td>
</tr>
<tr>
<td><code class="prettyprint">customer.name</code></td>
<td>Texto</td>
<td>100</td>
<td>Sim</td>
<td>Nome do portador do cartão.</td>
</tr>
<tr>
<td><code class="prettyprint">customer.document</code></td>
<td>Texto</td>
<td>18</td>
<td>Não</td>
<td>Número do CPF/CNPJ do portador do cartão.</td>
</tr>
<tr>
<td><code class="prettyprint">customer.mail</code></td>
<td>Texto</td>
<td>40</td>
<td>Não</td>
<td>E-mail do portador do cartão.</td>
</tr>
<tr>
<td><code class="prettyprint">address.address</code></td>
<td>Texto</td>
<td>60</td>
<td>Sim</td>
<td>Endereço do comprador.</td>
</tr>
<tr>
<td><code class="prettyprint">address.number</code></td>
<td>Texto</td>
<td>10</td>
<td>Sim</td>
<td>Número do comprador.</td>
</tr>
<tr>
<td><code class="prettyprint">address.district</code></td>
<td>Texto</td>
<td>80</td>
<td>Sim</td>
<td>Bairro do comprador.</td>
</tr>
<tr>
<td><code class="prettyprint">address.zipcode</code></td>
<td>Número</td>
<td>8</td>
<td>Sim</td>
<td>CEP do comprador.</td>
</tr>
<tr>
<td><code class="prettyprint">address.city</code></td>
<td>Texto</td>
<td>30</td>
<td>Sim</td>
<td>Cidade do comprador.</td>
</tr>
<tr>
<td><code class="prettyprint">address.state</code></td>
<td>Texto</td>
<td>2</td>
<td>Sim</td>
<td>Sigla do estado do comprador.</td>
</tr>
<tr>
<td><code class="prettyprint">card.type</code></td>
<td>Inteiro</td>
<td>—</td>
<td>Não</td>
<td>Configura as opcões disponíveis. 1 Configura cartão de crédito. 2 Configura cartão de débito.</td>
</tr>
<tr>
<td><code class="prettyprint">card.installments</code></td>
<td>Número</td>
<td>2</td>
<td>Sim</td>
<td>Número de parcelas.</td>
</tr>
<tr>
<td><code class="prettyprint">card.capture</code></td>
<td>Booleano</td>
<td>—</td>
<td>Sim</td>
<td><strong>true</strong> = Autoriza e confirma a transação . <strong>false</strong> = Autorização, mas não confirma a transação, necessitando realizar a confirmação (<a href="#captura">Captura</a>) noutra requisição.</td>
</tr>
<tr>
<td><code class="prettyprint">card.authenticate</code></td>
<td>Número</td>
<td>1</td>
<td>Não</td>
<td>Opções disponíveis: <BR /> 1. Autorizar só transações autenticadas <BR /> 2. Autorizar transações autenticadas ou não autenticadas <BR /> 3. Autorizar sem autenticação <BR /></td>
</tr>
<tr>
<td><code class="prettyprint">card.interestType</code></td>
<td>Número</td>
<td>1</td>
<td>Sim</td>
<td>Operações disponíveis: <BR /> 3. Parcelado Loja <BR /> 4. Parcelado Administrador</td>
</tr>
<tr>
<td><code class="prettyprint">card.integrationType</code></td>
<td>Número</td>
<td>1</td>
<td>Sim</td>
<td>Tipo de integração disponível pelo Gate2All: <BR /> 1. Integrado<BR /> 2. Loja <BR /> 3. Direto</td>
</tr>
<tr>
<td><code class="prettyprint">card.saveCard</code></td>
<td>Booleano</td>
<td>—</td>
<td>Sim</td>
<td>Configura salvar o cartão (tokenização).</td>
</tr>
<tr>
<td><code class="prettyprint">card.codAuthorization</code></td>
<td>Texto</td>
<td>100</td>
<td>Codigo de autorização da instituição.</td>
<td></td>
</tr>
<tr>
<td><code class="prettyprint">card.providerReference</code></td>
<td>Texto</td>
<td>100</td>
<td>Referência da instituição.</td>
<td></td>
</tr>
<tr>
<td><code class="prettyprint">cardInfo.number</code></td>
<td>Texto</td>
<td>19</td>
<td>Sim</td>
<td>Número do cartão.</td>
</tr>
<tr>
<td><code class="prettyprint">cardInfo.brand</code></td>
<td>Texto</td>
<td>20</td>
<td>Sim</td>
<td>Bandeira do cartão. <a href="#bandeiras">Bandeiras</a>.</td>
</tr>
<tr>
<td><code class="prettyprint">bankSlip.emissionDate</code></td>
<td>Texto</td>
<td>20</td>
<td>Sim</td>
<td>Data de emissão do boleto. formato <strong>YYYY-MM-DD</strong></td>
</tr>
<tr>
<td><code class="prettyprint">bankSlip.expirationDate</code></td>
<td>Texto</td>
<td>20</td>
<td>Sim</td>
<td>Data de vencimento do boleto. formato <strong>YYYY-MM-DD</strong></td>
</tr>
<tr>
<td><code class="prettyprint">bankSlip.instructions</code></td>
<td>Texto</td>
<td>300</td>
<td>Sim</td>
<td>Instruções do boleto.</td>
</tr>
<tr>
<td><code class="prettyprint">bankSlip.guarantor</code></td>
<td>Texto</td>
<td>45</td>
<td>Sim</td>
<td>Nome do avalista.</td>
</tr>
<tr>
<td><code class="prettyprint">bankSlip.provider</code></td>
<td>Texto</td>
<td>20</td>
<td>Sim</td>
<td>Nome da instituição financeira :<ul><li><strong>BRADESCO</strong></li><li><strong>ITAU</strong></li></ul></td>
</tr>
<tr>
<td><code class="prettyprint">bankSlip.paymentDate</code></td>
<td>Texto</td>
<td>20</td>
<td>Data de pagamento do boleto. formato <strong>YYYY-MM-DD</strong></td>
<td></td>
</tr>
<tr>
<td><code class="prettyprint">bankSlip.paymentAmount</code></td>
<td>Número</td>
<td>16</td>
<td>Valor de pagamento do boleto sem pontuação. Os dois últimos dígitos são os centavos. (Ex: amount: 100 = R$ 1,00)</td>
<td></td>
</tr>
<tr>
<td><code class="prettyprint">bankSlip.url</code></td>
<td>Texto</td>
<td>300</td>
<td>Endereço de acesso da transação.</td>
<td></td>
</tr>
<tr>
<td><code class="prettyprint">bankSlip.providerReference</code></td>
<td>Texto</td>
<td>100</td>
<td>Referência da instituição.</td>
<td></td>
</tr>
<tr>
<td><code class="prettyprint">electronicTransfer.provider</code></td>
<td>Texto</td>
<td>20</td>
<td>Nome da instituição financeira :<ul><li><strong>BRADESCO</strong></li><li><strong>ITAU</strong></li></ul></td>
<td></td>
</tr>
<tr>
<td><code class="prettyprint">electronicTransfer.url</code></td>
<td>Texto</td>
<td>300</td>
<td>Endereço de acesso da transação.</td>
<td></td>
</tr>
<tr>
<td><code class="prettyprint">electronicTransfer.providerReference</code></td>
<td>Texto</td>
<td>100</td>
<td>Referência da instituição.</td>
<td></td>
</tr>
</tbody></table>

<h2 id="consulta-pelo-n-mero-do-pedido">Consulta pelo número do Pedido</h2>

<p>É possível realizar uma consulta pelo número do pedido através do seguinte recurso:</p>

<h3 id="requisi-o">Requisição</h3>

<aside class="request"><span class="method get">GET</span> <span class="endpoint">/v1/transactions?referenceId={{referenceId}}</span></aside>
<pre class="highlight java"><code>
<span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>

<span class="n">URL</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"https://api.2all.com.br/v1/transactions?referenceId=1493321061725"</span><span class="o">);</span>
<span class="n">HttpURLConnection</span> <span class="n">con</span> <span class="o">=</span> <span class="o">(</span><span class="n">HttpURLConnection</span><span class="o">)</span> <span class="n">obj</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"GET"</span><span class="o">);</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"content-type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"authenticationapi"</span><span class="o">,</span> <span class="s">"demo"</span><span class="o">);</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"authenticationkey"</span><span class="o">,</span> <span class="s">"demo"</span><span class="o">);</span>

<span class="n">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Scanner</span><span class="o">(</span><span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">con</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">())));</span>
<span class="n">String</span> <span class="n">response</span> <span class="o">=</span> <span class="n">scanner</span><span class="o">.</span><span class="na">nextLine</span><span class="o">();</span>
<span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">);</span>

</code></pre>

<table><thead>
<tr>
<th>Propriedade</th>
<th>Tipo</th>
<th>Tamanho</th>
<th>Obrigatório</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">referenceId</code></td>
<td>Texto</td>
<td>100</td>
<td>Sim</td>
<td>Número de identificação da loja.</td>
</tr>
</tbody></table>

<h3 id="resposta">RESPOSTA</h3>

<blockquote>
<p>Retorno da Transação.</p>
</blockquote>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"transactionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b9a37a7b-5ffe-4993-82ab-a26b6f332afe"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
    </span><span class="nt">"dtTransaction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-15T11:17:40"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<pre class="highlight shell"><code></code></pre>

<table><thead>
<tr>
<th>Propriedade</th>
<th>Tipo</th>
<th>Tamanho</th>
<th>Obrigatório</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">transactionId</code></td>
<td>Texto</td>
<td>150</td>
<td>Sim</td>
<td>Identificador da transação retornado pelo gateway.</td>
</tr>
<tr>
<td><code class="prettyprint">amount</code></td>
<td>Número</td>
<td>16</td>
<td>Sim</td>
<td>Valor da transação sem pontuação. Os dois últimos dígitos são os centavos. (Ex: amount: 100 = R$ 1,00)</td>
</tr>
<tr>
<td><code class="prettyprint">status</code></td>
<td>Número</td>
<td>2</td>
<td>Não</td>
<td>Status da transação retornado pelo gateway. <a href="#status">catálogo</a></td>
</tr>
<tr>
<td><code class="prettyprint">dtTransaction</code></td>
<td>DataHora</td>
<td>19</td>
<td>Data e hora da transação.</td>
<td></td>
</tr>
</tbody></table>

<h2 id="consulta-pelo-n-mero-do-pedido-com-limite">Consulta pelo número do Pedido com Limite</h2>

<p>Também é possível realizar uma consulta pelo número do pedido passando um limite.</p>

<h3 id="requisi-o">Requisição</h3>

<aside class="request"><span class="method get">GET</span> <span class="endpoint">/v1/transactions?referenceId={{referenceId}}&limit=2</span></aside>
<pre class="highlight java"><code>
<span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>

<span class="n">URL</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"https://api.2all.com.br/v1/transactions?referenceId=1493321061725&amp;limit=2"</span><span class="o">);</span>
<span class="n">HttpURLConnection</span> <span class="n">con</span> <span class="o">=</span> <span class="o">(</span><span class="n">HttpURLConnection</span><span class="o">)</span> <span class="n">obj</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"GET"</span><span class="o">);</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"content-type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"authenticationapi"</span><span class="o">,</span> <span class="s">"demo"</span><span class="o">);</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"authenticationkey"</span><span class="o">,</span> <span class="s">"demo"</span><span class="o">);</span>

<span class="n">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Scanner</span><span class="o">(</span><span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">con</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">())));</span>
<span class="n">String</span> <span class="n">response</span> <span class="o">=</span> <span class="n">scanner</span><span class="o">.</span><span class="na">nextLine</span><span class="o">();</span>
<span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">);</span>

</code></pre>

<table><thead>
<tr>
<th>Propriedade</th>
<th>Tipo</th>
<th>Tamanho</th>
<th>Obrigatório</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">referenceId</code></td>
<td>Texto</td>
<td>100</td>
<td>Sim</td>
<td>Número de identificação da loja.</td>
</tr>
<tr>
<td><code class="prettyprint">limit</code></td>
<td>Número</td>
<td>10</td>
<td>Não</td>
<td>Limite Máximo de pedidos 10.</td>
</tr>
</tbody></table>

<h3 id="resposta">RESPOSTA</h3>

<blockquote>
<p>Retorno da Transação.</p>
</blockquote>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"transactionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"894aa0ad-517a-435c-b95d-8f60f1a2b9f5"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="nt">"dtTransaction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-16T07:37:23"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"transactionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5dbc102d-2b4b-4755-9f14-1b4c3d8a6716"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="nt">"dtTransaction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-16T07:37:00"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<pre class="highlight shell"><code></code></pre>

<table><thead>
<tr>
<th>Propriedade</th>
<th>Tipo</th>
<th>Tamanho</th>
<th>Obrigatório</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">transactionId</code></td>
<td>Texto</td>
<td>150</td>
<td>Sim</td>
<td>Identificador da transação retornado pelo gateway.</td>
</tr>
<tr>
<td><code class="prettyprint">amount</code></td>
<td>Número</td>
<td>16</td>
<td>Sim</td>
<td>Valor da transação sem pontuação. Os dois últimos dígitos são os centavos. (Ex: amount: 100 = R$ 1,00)</td>
</tr>
<tr>
<td><code class="prettyprint">status</code></td>
<td>Número</td>
<td>2</td>
<td>Não</td>
<td>Status da transação retornado pelo gateway. <a href="#status">catálogo</a></td>
</tr>
<tr>
<td><code class="prettyprint">dtTransaction</code></td>
<td>DataHora</td>
<td>19</td>
<td>Data e hora da transação.</td>
<td></td>
</tr>
</tbody></table>

<h1 id="tokeniza-o">Tokenização</h1>

<p>O método de tokenização permite a realização de transações sem o envio dos dados do cartão de crédito pela loja virtual. Os dados do cartão são armazenados na rede adquirente que retorna um código associado ao número do cartão e o estabelecimento que solicitou o armazenamento.</p>

<p>Os dados do cartão poderão ser salvos de três formas:</p>

<ol>
<li><p>Configurando o parâmetro <code class="prettyprint">&quot;saveCard&quot;: true</code> nas requisições de transação de cartão de crédito.</p></li>
<li><p>Acionando o formulário do GATE2all para capturar os dados do cartão (desta forma seu sistema não manipula os dados sensíveis do cartão).</p></li>
<li><p>Enviando os dados do cartão via POST.</p></li>
</ol>

<p><strong>REGRAS DA TOKENIZAÇÃO:</strong></p>

<ul>
<li><strong>Disponível somente para adquirente Cielo.</strong></li>
<li>Cada código de token é único por estabelecimento comercial. Se o mesmo cartão for “tokenizado” para outro estabelecimento, este terá um token diferente.</li>
<li>Caso um estabelecimento envie duas ou mais vezes para gravar os mesmos dados de cartão, será retornado sempre o mesmo token.</li>
<li>Não há garantia que o cartão gravado terá todas as suas transações autorizadas, pois são processos independentes e distintos.</li>
<li>Um token não utilizado poderá ser removido do banco de dados da adquirente, conforme politica própria.</li>
</ul>

<aside class="warning">A adquirente poderá cobrar valores pelo serviço de armazenamento de dados de cartões de crédito.</aside>

<p>Esta integração permite que o desenvolvedor da loja virtual implemente:</p>

<ul>
<li>Transação em um click ou “one step checkout”.</li>
<li>Recorrência de transações sem o armazenamento dos dados dos cartões.</li>
</ul>

<h2 id="tokeniza-o-com-formul-rio">Tokenização com Formulário</h2>

<p>Para criar um formulário que capturá os dados do cartão para gerar um token é necessário enviar um POST para o seguinte recurso:</p>

<h3 id="requisi-o">REQUISIÇÃO</h3>

<aside class="request"><span class="method post">POST</span> <span class="endpoint">/v1/tokenization/intention</span></aside>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"referenceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19893211234"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"postBackUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://url-notificacao"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"redirectUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://url-redirect"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"cardInfo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"brand"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"VISA"</span><span class="w">  
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre class="highlight shell"><code></code></pre>
<pre class="highlight java"><code>
<span class="kn">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.DataOutputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStreamReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>

<span class="n">URL</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"https://api.2all.com.br/v1/tokenization/intention"</span><span class="o">);</span>
<span class="n">HttpURLConnection</span> <span class="n">con</span> <span class="o">=</span> <span class="o">(</span><span class="n">HttpURLConnection</span><span class="o">)</span> <span class="n">obj</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>

<span class="n">con</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"content-type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"authenticationapi"</span><span class="o">,</span> <span class="s">"demo"</span><span class="o">);</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"authenticationkey"</span><span class="o">,</span> <span class="s">"demo"</span><span class="o">);</span>

<span class="n">String</span> <span class="n">body</span> <span class="o">=</span> <span class="s">"{"</span>
        <span class="o">+</span> <span class="s">"\"postBackUrl\": \"http://url-notificacao\","</span>
        <span class="o">+</span> <span class="s">"\"redirectUrl\": \"http://url-redirect\","</span>
        <span class="o">+</span> <span class="s">"\"cardInfo\": {"</span>
        <span class="o">+</span> <span class="s">"\"brand\" : \"VISA\""</span>
        <span class="o">+</span> <span class="s">"}"</span><span class="o">,</span>
        <span class="o">+</span> <span class="s">"}"</span><span class="o">;</span>

<span class="n">con</span><span class="o">.</span><span class="na">setDoOutput</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
<span class="n">DataOutputStream</span> <span class="n">dos</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DataOutputStream</span><span class="o">(</span><span class="n">con</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">());</span>
<span class="n">dos</span><span class="o">.</span><span class="na">writeBytes</span><span class="o">(</span><span class="n">body</span><span class="o">);</span>
<span class="n">dos</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
<span class="n">dos</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

<span class="n">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Scanner</span><span class="o">(</span><span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">con</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">())));</span>
<span class="n">String</span> <span class="n">response</span> <span class="o">=</span> <span class="n">scanner</span><span class="o">.</span><span class="na">nextLine</span><span class="o">();</span>
<span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">);</span>

</code></pre>

<table><thead>
<tr>
<th>Propriedade</th>
<th>Tipo</th>
<th>Tamanho</th>
<th>Obrigatório</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">referenceId</code></td>
<td>Texto</td>
<td>100</td>
<td>Sim</td>
<td>Número de identificação da loja.</td>
</tr>
<tr>
<td><code class="prettyprint">postBackUrl</code></td>
<td>Texto</td>
<td>—</td>
<td>Sim</td>
<td>URL onde o GATE2all notificará eventuais status da tokenização para o lojista.</td>
</tr>
<tr>
<td><code class="prettyprint">redirectUrl</code></td>
<td>Texto</td>
<td>—</td>
<td>Sim</td>
<td>URL onde o GATE2all redirecionará o comprador após o processamento da tokenização.</td>
</tr>
<tr>
<td><code class="prettyprint">brand</code></td>
<td>Texto</td>
<td>20</td>
<td>Não</td>
<td>Bandeira do cartão.<a href="#bandeiras">Bandeiras</a>.</td>
</tr>
</tbody></table>

<h3 id="resposta">RESPOSTA</h3>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"tokenizationId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b303e861-37d3-4d11-866b-735c6ff58989"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"referenceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1495660823910"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"postBackUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://url-notificacao"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"redirectUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://url-redirect"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://api.2all.com.br/v1/save-card/b303e861-37d3-4d11-866b-735c6ff58989"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"saveCard"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nt">"cardInfo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"brand"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VISA"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre class="highlight shell"><code></code></pre>

<table><thead>
<tr>
<th>Propriedade</th>
<th>Tipo</th>
<th>Tamanho</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">tokenizationId</code></td>
<td>Texto</td>
<td>36</td>
<td>Identificador da tokenização do GATE2all.</td>
</tr>
<tr>
<td><code class="prettyprint">url</code></td>
<td>Texto</td>
<td>150</td>
<td>URL disponível para acesso a tokenização.</td>
</tr>
<tr>
<td><code class="prettyprint">cardInfo.saveCard</code></td>
<td>Booleano</td>
<td>—</td>
<td>Sim</td>
</tr>
</tbody></table>

<aside class="success">
Redirecione o comprador para a URL da resposta.
</aside>

<p><BR></p>

<aside class="notice">
Caso a bandeira seja passado como paramêtro, será disponibilizado a seguinte tela de acesso.
</aside>

<p><BR></p>

<p><img src="images/img-intention-01.png" /></p>

<p><BR>
<aside class="notice">
Caso não seja seja passado nenhuma bandeira como paramêtro, será disponibilizado a seguinte tela de acesso com as bandeiras configuradas.
</aside></p>

<p><BR>
<img src="images/img-intention-02.png" /></p>

<h2 id="tokeniza-o-direta">Tokenização Direta</h2>

<p>Para realizar uma tokenização direta é necessário enviar um POST para o seguinte recurso:</p>

<h3 id="requisi-o">Requisição</h3>

<aside class="request"><span class="method post">POST</span> <span class="endpoint">/v1/tokenization</span></aside>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"referenceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19893211234"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"postBackUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://url-notificacao"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"cardInfo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4024007148992927"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"expirationMonth"</span><span class="p">:</span><span class="w"> </span><span class="s2">"04"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"expirationYear"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"brand"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VISA"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"holderName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Comprador"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre class="highlight shell"><code></code></pre>
<pre class="highlight java"><code>
<span class="kn">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.DataOutputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStreamReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>

<span class="n">URL</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"https://api.2all.com.br/v1/tokenization"</span><span class="o">);</span>
<span class="n">HttpURLConnection</span> <span class="n">con</span> <span class="o">=</span> <span class="o">(</span><span class="n">HttpURLConnection</span><span class="o">)</span> <span class="n">obj</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>

<span class="n">con</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"content-type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"authenticationapi"</span><span class="o">,</span> <span class="s">"demo"</span><span class="o">);</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"authenticationkey"</span><span class="o">,</span> <span class="s">"demo"</span><span class="o">);</span>

<span class="n">String</span> <span class="n">body</span> <span class="o">=</span> <span class="s">"{"</span>
    <span class="o">+</span> <span class="s">"\"referenceId\": \"123456789\","</span>
    <span class="o">+</span> <span class="s">"\"postBackUrl\": \"http://url-notificacao\","</span>
    <span class="o">+</span> <span class="s">"    \"cardInfo\": {"</span>
    <span class="o">+</span> <span class="s">"        \"number\": \"4556326359707410\","</span>
    <span class="o">+</span> <span class="s">"        \"expirationMonth\": \"04\","</span>
    <span class="o">+</span> <span class="s">"        \"expirationYear\": \"2017\","</span>
    <span class="o">+</span> <span class="s">"        \"brand\": \"VISA\","</span>
    <span class="o">+</span> <span class="s">"        \"holderName\": \"Comprador\""</span>
    <span class="o">+</span> <span class="s">"      }"</span>
    <span class="o">+</span> <span class="s">"}"</span><span class="o">;</span>

<span class="n">con</span><span class="o">.</span><span class="na">setDoOutput</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
<span class="n">DataOutputStream</span> <span class="n">dos</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DataOutputStream</span><span class="o">(</span><span class="n">con</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">());</span>
<span class="n">dos</span><span class="o">.</span><span class="na">writeBytes</span><span class="o">(</span><span class="n">body</span><span class="o">);</span>
<span class="n">dos</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
<span class="n">dos</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

<span class="n">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Scanner</span><span class="o">(</span><span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">con</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">())));</span>
<span class="n">String</span> <span class="n">response</span> <span class="o">=</span> <span class="n">scanner</span><span class="o">.</span><span class="na">nextLine</span><span class="o">();</span>
<span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">);</span>

</code></pre>

<table><thead>
<tr>
<th>Propriedade</th>
<th style="text-align: center">Tipo</th>
<th style="text-align: center">Tamanho</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">referenceId</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">100</td>
<td>Sim</td>
</tr>
<tr>
<td><code class="prettyprint">postBackUrl</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">—</td>
<td>Sim</td>
</tr>
<tr>
<td><code class="prettyprint">cardInfo.number</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">20</td>
<td>Número do cartão truncado.</td>
</tr>
<tr>
<td><code class="prettyprint">cardInfo.expirationMonth</code></td>
<td style="text-align: center">Número</td>
<td style="text-align: center">2</td>
<td>Mês da validade do cartão.</td>
</tr>
<tr>
<td><code class="prettyprint">cardInfo.expirationYear</code></td>
<td style="text-align: center">Número</td>
<td style="text-align: center">4</td>
<td>Ano da validade do cartão.</td>
</tr>
<tr>
<td><code class="prettyprint">cardInfo.brand</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">20</td>
<td>Bandeira do cartão.<a href="#bandeiras">Bandeiras</a>.</td>
</tr>
<tr>
<td><code class="prettyprint">cardInfo.holderName</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">100</td>
<td>Nome do portador do cartão.</td>
</tr>
</tbody></table>

<h3 id="resposta">RESPOSTA</h3>

<blockquote>
<p>Tokenização gerada</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"tokenizationId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f414a0b8-f5de-4245-aae5-733f10c1963d"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"referenceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19893211234"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"postBackUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://url-notificacao"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CIELO"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"saveCard"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nt">"cardInfo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"402400******2927"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"expirationMonth"</span><span class="p">:</span><span class="w"> </span><span class="s2">"04"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"expirationYear"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"brand"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VISA"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"be4cbeb1-abb2-4913-8165-f86962143fa021"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"holderName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Comprador"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre class="highlight shell"><code></code></pre>

<table><thead>
<tr>
<th>Propriedade</th>
<th style="text-align: center">Tipo</th>
<th style="text-align: center">Tamanho</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">tokenizationId</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">36</td>
<td>Identificador da tokenização do GATE2all.</td>
</tr>
<tr>
<td><code class="prettyprint">provider</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">100</td>
<td>Nome da Rede Adquirente.</td>
</tr>
<tr>
<td><code class="prettyprint">saveCard</code></td>
<td style="text-align: center">Booleano</td>
<td style="text-align: center">Sim</td>
<td>Configura salvar o cartão (tokenização).</td>
</tr>
<tr>
<td><code class="prettyprint">cardInfo.token</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">100</td>
<td>Token do cartão.</td>
</tr>
</tbody></table>

<blockquote>
<p>Consulta Token</p>
</blockquote>

<p>Para realizar uma consulta de token é necessário enviar um GET para o seguinte recurso:</p>

<h3 id="requisi-o">Requisição</h3>

<aside class="request"><span class="method get">GET</span> <span class="endpoint">/v1/tokenization/{{token}}</span></aside>
<pre class="highlight java"><code>
<span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>

<span class="n">URL</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"https://api.2all.com.br/v1/tokenization/be4cbeb1-abb2-4913-8165-f86962143fa021"</span><span class="o">);</span>
<span class="n">HttpURLConnection</span> <span class="n">con</span> <span class="o">=</span> <span class="o">(</span><span class="n">HttpURLConnection</span><span class="o">)</span> <span class="n">obj</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"GET"</span><span class="o">);</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"content-type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"authenticationapi"</span><span class="o">,</span> <span class="s">"demo"</span><span class="o">);</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"authenticationkey"</span><span class="o">,</span> <span class="s">"demo"</span><span class="o">);</span>

<span class="n">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Scanner</span><span class="o">(</span><span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">con</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">())));</span>
<span class="n">String</span> <span class="n">response</span> <span class="o">=</span> <span class="n">scanner</span><span class="o">.</span><span class="na">nextLine</span><span class="o">();</span>
<span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">);</span>

</code></pre>

<table><thead>
<tr>
<th>Propriedade</th>
<th>Tipo</th>
<th>Tamanho</th>
<th>Obrigatório</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">token</code></td>
<td>Texto</td>
<td>150</td>
<td>Sim</td>
<td>Token NTK retornado na tokenização do cartão.</td>
</tr>
</tbody></table>

<h3 id="resposta">RESPOSTA</h3>

<blockquote>
<p>Retorno Consulta Token .</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"tokenizationId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7c6785d9-4922-4b0d-986e-9bb5e624c613"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"referenceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1496173577825"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"postBackUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nt">"saveCard"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CIELO"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"cardInfo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"402400******2927"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"expirationMonth"</span><span class="p">:</span><span class="w"> </span><span class="s2">"04"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"expirationYear"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"brand"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VISA"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"be4cbeb1-abb2-4913-8165-f86962143fa021"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"holderName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Comprador"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<table><thead>
<tr>
<th>Propriedade</th>
<th style="text-align: center">Tipo</th>
<th style="text-align: center">Tamanho</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">tokenizationId</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">36</td>
<td>Identificador da tokenização do GATE2all.</td>
</tr>
<tr>
<td><code class="prettyprint">referenceId</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">100</td>
<td>Sim</td>
</tr>
<tr>
<td><code class="prettyprint">postBackUrl</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">—</td>
<td>Sim</td>
</tr>
<tr>
<td><code class="prettyprint">provider</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">100</td>
<td>Nome da Rede Adquirente.</td>
</tr>
<tr>
<td><code class="prettyprint">saveCard</code></td>
<td style="text-align: center">Booleano</td>
<td style="text-align: center">Sim</td>
<td>Default true</td>
</tr>
<tr>
<td><code class="prettyprint">cardInfo.number</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">20</td>
<td>Número do cartão truncado.</td>
</tr>
<tr>
<td><code class="prettyprint">cardInfo.expirationMonth</code></td>
<td style="text-align: center">Número</td>
<td style="text-align: center">2</td>
<td>Mês da validade do cartão.</td>
</tr>
<tr>
<td><code class="prettyprint">cardInfo.expirationYear</code></td>
<td style="text-align: center">Número</td>
<td style="text-align: center">4</td>
<td>Ano da validade do cartão.</td>
</tr>
<tr>
<td><code class="prettyprint">cardInfo.brand</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">20</td>
<td>Bandeira do cartão.<a href="#bandeiras">Bandeiras</a>.</td>
</tr>
<tr>
<td><code class="prettyprint">cardInfo.token</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">100</td>
<td>Token do cartão.</td>
</tr>
<tr>
<td><code class="prettyprint">cardInfo.holderName</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">100</td>
<td>Nome do portador do cartão.</td>
</tr>
</tbody></table>

<h2 id="consulta-do-token-pelo-n-mero-de-referencia-com-limite">Consulta do token pelo Número de Referencia com Limite</h2>

<p>Também é possível realizar uma consulta pelo número de referência passando ou não um limite.</p>

<h3 id="requisi-o">Requisição</h3>

<aside class="request"><span class="method get">GET</span> <span class="endpoint">/v1/tokenization?referenceId={{referenceId}}&limit=2</span></aside>
<pre class="highlight java"><code>
<span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>

<span class="n">URL</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"https://api.2all.com.br/v1/tokenization?referenceId=1496173577825&amp;limit=2"</span><span class="o">);</span>
<span class="n">HttpURLConnection</span> <span class="n">con</span> <span class="o">=</span> <span class="o">(</span><span class="n">HttpURLConnection</span><span class="o">)</span> <span class="n">obj</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"GET"</span><span class="o">);</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"content-type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"authenticationapi"</span><span class="o">,</span> <span class="s">"demo"</span><span class="o">);</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"authenticationkey"</span><span class="o">,</span> <span class="s">"demo"</span><span class="o">);</span>

<span class="n">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Scanner</span><span class="o">(</span><span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">con</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">())));</span>
<span class="n">String</span> <span class="n">response</span> <span class="o">=</span> <span class="n">scanner</span><span class="o">.</span><span class="na">nextLine</span><span class="o">();</span>
<span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">);</span>

</code></pre>

<table><thead>
<tr>
<th>Propriedade</th>
<th>Tipo</th>
<th>Tamanho</th>
<th>Obrigatório</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">referenceId</code></td>
<td>Texto</td>
<td>100</td>
<td>Sim</td>
<td>Número de identificação da loja.</td>
</tr>
<tr>
<td><code class="prettyprint">limit</code></td>
<td>Número</td>
<td>10</td>
<td>Não</td>
<td>Limite Máximo de referências 10.</td>
</tr>
</tbody></table>

<h3 id="resposta">RESPOSTA</h3>

<blockquote>
<p>Retorno da Transação.</p>
</blockquote>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"tokenizationId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7c6785d9-4922-4b0d-986e-9bb5e624c613"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"referenceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1496173577825"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"postBackUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nt">"saveCard"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CIELO"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"cardInfo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"402400******2927"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"expirationMonth"</span><span class="p">:</span><span class="w"> </span><span class="s2">"04"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"expirationYear"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"brand"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VISA"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"be4cbeb1-abb2-4913-8165-f86962143fa021"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<pre class="highlight shell"><code></code></pre>

<table><thead>
<tr>
<th>Propriedade</th>
<th style="text-align: center">Tipo</th>
<th style="text-align: center">Tamanho</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">tokenizationId</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">36</td>
<td>Identificador da tokenização do GATE2all.</td>
</tr>
<tr>
<td><code class="prettyprint">referenceId</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">100</td>
<td>Sim</td>
</tr>
<tr>
<td><code class="prettyprint">postBackUrl</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">—</td>
<td>Sim</td>
</tr>
<tr>
<td><code class="prettyprint">provider</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">100</td>
<td>Nome da Rede Adquirente.</td>
</tr>
<tr>
<td><code class="prettyprint">saveCard</code></td>
<td style="text-align: center">Booleano</td>
<td style="text-align: center">Sim</td>
<td>Default true</td>
</tr>
<tr>
<td><code class="prettyprint">cardInfo.number</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">20</td>
<td>Número do cartão truncado.</td>
</tr>
<tr>
<td><code class="prettyprint">cardInfo.expirationMonth</code></td>
<td style="text-align: center">Número</td>
<td style="text-align: center">2</td>
<td>Mês da validade do cartão.</td>
</tr>
<tr>
<td><code class="prettyprint">cardInfo.expirationYear</code></td>
<td style="text-align: center">Número</td>
<td style="text-align: center">4</td>
<td>Ano da validade do cartão.</td>
</tr>
<tr>
<td><code class="prettyprint">cardInfo.brand</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">20</td>
<td>Bandeira do cartão. <a href="#bandeiras">Bandeiras</a>.</td>
</tr>
<tr>
<td><code class="prettyprint">cardInfo.token</code></td>
<td style="text-align: center">Texto</td>
<td style="text-align: center">100</td>
<td>Token do cartão.</td>
</tr>
</tbody></table>

<h2 id="transa-o-com-token">Transação com Token</h2>

<p>Para criar uma transação com token é necessário enviar um POST para o seguinte recurso:</p>

<h3 id="requisi-o">REQUISIÇÃO</h3>

<aside class="request"><span class="method post">POST</span> <span class="endpoint">/v1/transactions</span></aside>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
   </span><span class="nt">"referenceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19893211234"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Mouse sem fio"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"customer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Comprador Teste"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"document"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345678909"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nt">"payment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
       </span><span class="nt">"card"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
          </span><span class="nt">"capture"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nt">"installments"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
          </span><span class="nt">"interestType"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
          </span><span class="nt">"authenticate"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
          </span><span class="nt">"softDescriptor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Pagamento Gate2all"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"cardInfo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4b6a2aa5-de91-4d52-a4d1-f265f208e5a321"</span><span class="w">
          </span><span class="p">}</span><span class="w">
       </span><span class="p">}</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre class="highlight shell"><code></code></pre>
<pre class="highlight java"><code>
<span class="kn">import</span> <span class="nn">java.io.BufferedReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.DataOutputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStreamReader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.HttpURLConnection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URL</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>

<span class="n">URL</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"https://api.2all.com.br/v1/transactions"</span><span class="o">);</span>
<span class="n">HttpURLConnection</span> <span class="n">con</span> <span class="o">=</span> <span class="o">(</span><span class="n">HttpURLConnection</span><span class="o">)</span> <span class="n">obj</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>

<span class="n">con</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"content-type"</span><span class="o">,</span> <span class="s">"application/json"</span><span class="o">);</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"authenticationapi"</span><span class="o">,</span> <span class="s">"demo"</span><span class="o">);</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestProperty</span><span class="o">(</span><span class="s">"authenticationkey"</span><span class="o">,</span> <span class="s">"demo"</span><span class="o">);</span>

<span class="n">String</span> <span class="n">body</span> <span class="o">=</span> <span class="s">"{"</span>
      <span class="o">+</span> <span class="s">"\"referenceId\": \"123456789\","</span>
      <span class="o">+</span> <span class="s">"\"amount\": \"100\","</span>
      <span class="o">+</span> <span class="s">"\"description\": \"TV LG 42\","</span>
      <span class="o">+</span> <span class="s">"\"postBackUrl\": \"http://requestb.in/qkg1clqk\","</span>
      <span class="o">+</span> <span class="s">"    \"customer\": {"</span>
      <span class="o">+</span> <span class="s">"        \"name\": \"LUIS A R ROMERO\","</span>
      <span class="o">+</span> <span class="s">"        \"document\": \"12345678909\""</span>
      <span class="o">+</span> <span class="s">"   },"</span>
      <span class="o">+</span> <span class="s">"    \"payment\": {"</span>
      <span class="o">+</span> <span class="s">"        \"card\": {"</span>
      <span class="o">+</span> <span class="s">"           \"type\": 1,"</span>
      <span class="o">+</span> <span class="s">"           \"capture\": true,"</span>
      <span class="o">+</span> <span class="s">"           \"installments\": 1,"</span>
      <span class="o">+</span> <span class="s">"           \"interestType\": 3,"</span>
      <span class="o">+</span> <span class="s">"           \"softDescriptor\": \"EC02\","</span>
      <span class="o">+</span> <span class="s">"           \"cardInfo\": {"</span>
      <span class="o">+</span> <span class="s">"               \"token\": \"7a7820d0-ff6d-484a-8b8e-988d6d0ec0cc21\""</span>
      <span class="o">+</span> <span class="s">"           }"</span>
      <span class="o">+</span> <span class="s">"        }"</span>
      <span class="o">+</span> <span class="s">"    }"</span>
      <span class="o">+</span> <span class="s">"   "</span>
      <span class="o">+</span> <span class="s">"}"</span><span class="o">;</span>

<span class="n">con</span><span class="o">.</span><span class="na">setDoOutput</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
<span class="n">DataOutputStream</span> <span class="n">dos</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DataOutputStream</span><span class="o">(</span><span class="n">con</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">());</span>
<span class="n">dos</span><span class="o">.</span><span class="na">writeBytes</span><span class="o">(</span><span class="n">body</span><span class="o">);</span>
<span class="n">dos</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
<span class="n">dos</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

<span class="n">Scanner</span> <span class="n">scanner</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Scanner</span><span class="o">(</span><span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">con</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">())));</span>
<span class="n">String</span> <span class="n">response</span> <span class="o">=</span> <span class="n">scanner</span><span class="o">.</span><span class="na">nextLine</span><span class="o">();</span>
<span class="n">scanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">);</span>

</code></pre>

<table><thead>
<tr>
<th>Propriedade</th>
<th>Tipo</th>
<th>Tamanho</th>
<th>Obrigatório</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">referenceId</code></td>
<td>Texto</td>
<td>100</td>
<td>Sim</td>
<td>Número de identificação da loja.</td>
</tr>
<tr>
<td><code class="prettyprint">amount</code></td>
<td>Número</td>
<td>16</td>
<td>Sim</td>
<td>Valor da transação sem pontuação. Os dois últimos dígitos são os centavos. (Ex: amount: 100 = R$ 1,00)</td>
</tr>
<tr>
<td><code class="prettyprint">description</code></td>
<td>Texto</td>
<td>300</td>
<td>Não</td>
<td>Descrição da transação.</td>
</tr>
<tr>
<td><code class="prettyprint">customer.name</code></td>
<td>Texto</td>
<td>100</td>
<td>Sim</td>
<td>Nome do portador do cartão.</td>
</tr>
<tr>
<td><code class="prettyprint">customer.document</code></td>
<td>Texto</td>
<td>18</td>
<td>Não</td>
<td>Número do CPF/CNPJ do portador do cartão.</td>
</tr>
<tr>
<td><code class="prettyprint">card.type</code></td>
<td>Inteiro</td>
<td>—</td>
<td>Não</td>
<td>Configura as opcões disponíveis. 1 Configura cartão de crédito. 2 Configura cartão de débito.</td>
</tr>
<tr>
<td><code class="prettyprint">card.capture</code></td>
<td>Booleano</td>
<td>—</td>
<td>Sim</td>
<td><strong>true</strong> = Autoriza e confirma a transação . <strong>false</strong> = Autorização, mas não confirma a transação, necessitando realizar a confirmação (<a href="#captura">Captura</a>) noutra requisição.</td>
</tr>
<tr>
<td><code class="prettyprint">card.installments</code></td>
<td>Número</td>
<td>2</td>
<td>Sim</td>
<td>Número de parcelas.</td>
</tr>
<tr>
<td><code class="prettyprint">card.interestType</code></td>
<td>Número</td>
<td>1</td>
<td>Sim</td>
<td>Operações disponíveis: <BR /> 3. Parcelado Loja <BR /> 4. Parcelado Administrador</td>
</tr>
<tr>
<td><code class="prettyprint">card.authenticate</code></td>
<td>Número</td>
<td>1</td>
<td>Não</td>
<td>Opções disponíveis: <BR /> 1. Autorizar só transações autenticadas <BR /> 2. Autorizar transações autenticadas ou não autenticadas <BR /> 3. Autorizar sem autenticação <BR /></td>
</tr>
<tr>
<td><code class="prettyprint">card.softDescriptor</code></td>
<td>Texto</td>
<td>22</td>
<td>Não</td>
<td>Texto a ser exibido na fatura do portador do cartão.</td>
</tr>
<tr>
<td><code class="prettyprint">cardInfo.token</code></td>
<td>Texto</td>
<td>100</td>
<td>Sim</td>
<td>Token gerado anteriormente pela operação de Tokenização.</td>
</tr>
</tbody></table>

<h3 id="resposta">RESPOSTA</h3>

<blockquote>
<p>Transação autorizada e não capturada</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"transactionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5a51ae6b-e91e-4b38-b596-e2acb77dca43"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"referenceId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1489093308860"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Mouse sem fio"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
  </span><span class="nt">"dtTransaction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-09T18:01:17"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"payment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"card"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"installments"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"capture"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"authenticate"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="nt">"softDescriptor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Pagamento Gate2all"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"interestType"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="nt">"integrationType"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CIELO"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"authenticationECI"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
      </span><span class="nt">"codAuthorization"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"providerReference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10069930690009510E9A"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"providerCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"providerMessage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Transação autorizada"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"saveCard"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"cardInfo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"402400******2927"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"expirationMonth"</span><span class="p">:</span><span class="w"> </span><span class="s2">"04"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"expirationYear"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"cvv"</span><span class="p">:</span><span class="w"> </span><span class="s2">"***"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"brand"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VISA"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4b6a2aa5-de91-4d52-a4d1-f265f208e5a321"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"customer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Comprador Teste"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"document"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345678909"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre class="highlight shell"><code></code></pre>

<table><thead>
<tr>
<th>Propriedade</th>
<th>Tipo</th>
<th>Tamanho</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">transactionId</code></td>
<td>Texto</td>
<td>150</td>
<td>Identificador da transação do GATE2all.</td>
</tr>
<tr>
<td><code class="prettyprint">dtTransaction</code></td>
<td>DataHora</td>
<td>19</td>
<td>Data e hora da transação.</td>
</tr>
<tr>
<td><code class="prettyprint">card.provider</code></td>
<td>Texto</td>
<td>100</td>
<td>Nome da instituição financeira.</td>
</tr>
<tr>
<td><code class="prettyprint">card.providerReference</code></td>
<td>Texto</td>
<td>100</td>
<td>Referência da instituição.</td>
</tr>
<tr>
<td><code class="prettyprint">card.providerMessage</code></td>
<td>Texto</td>
<td>100</td>
<td>Mensagem da instituição.</td>
</tr>
<tr>
<td><code class="prettyprint">card.providerCode</code></td>
<td>Texto</td>
<td>100</td>
<td>Codigo de resposta da instituição.</td>
</tr>
<tr>
<td><code class="prettyprint">card.codAuthorization</code></td>
<td>Texto</td>
<td>100</td>
<td>Codigo de autorização da instituição.</td>
</tr>
<tr>
<td><code class="prettyprint">card.authenticationECI</code></td>
<td>Texto</td>
<td>100</td>
<td>Indicador de autenticação da transação.<a href="#status-eci">Códigos ECI</a></td>
</tr>
<tr>
<td><code class="prettyprint">cardInfo.number</code></td>
<td>Texto</td>
<td>20</td>
<td>Número do cartão truncado.</td>
</tr>
<tr>
<td><code class="prettyprint">cardInfo.brand</code></td>
<td>Texto</td>
<td>20</td>
<td>Bandeira do cartão.<a href="#bandeiras">Bandeiras</a>.</td>
</tr>
<tr>
<td><code class="prettyprint">cardInfo.expirationMonth</code></td>
<td>Número</td>
<td>2</td>
<td>Mês da validade do cartão.</td>
</tr>
<tr>
<td><code class="prettyprint">cardInfo.expirationYear</code></td>
<td>Número</td>
<td>4</td>
<td>Ano da validade do cartão.</td>
</tr>
<tr>
<td><code class="prettyprint">cardInfo.cvv</code></td>
<td>Número</td>
<td>4</td>
<td>Não</td>
</tr>
<tr>
<td><code class="prettyprint">status</code></td>
<td>Número</td>
<td>2</td>
<td>Status da transação retornado pelo GATE2all <a href="#status">catálogo</a>.</td>
</tr>
</tbody></table>

          <h1 id="status">STATUS</h1>

<p>Status retornados pela API</p>

<table><thead>
<tr>
<th style="text-align: center">CÓDIGO</th>
<th>DESCRIÇÃO</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: center">0</td>
<td>TRANSACAO INICIADA</td>
</tr>
<tr>
<td style="text-align: center">1</td>
<td>AGUARDANDO PAGAMENTO</td>
</tr>
<tr>
<td style="text-align: center">2</td>
<td>EFETIVADA</td>
</tr>
<tr>
<td style="text-align: center">3</td>
<td>EM ANALISE</td>
</tr>
<tr>
<td style="text-align: center">4</td>
<td>EXPIRADO</td>
</tr>
<tr>
<td style="text-align: center">5</td>
<td>AUTORIZADO</td>
</tr>
<tr>
<td style="text-align: center">6</td>
<td>CONFIRMADO</td>
</tr>
<tr>
<td style="text-align: center">7</td>
<td>NEGADO</td>
</tr>
<tr>
<td style="text-align: center">8</td>
<td>CANCELAMENTO EM ANDAMENTO</td>
</tr>
<tr>
<td style="text-align: center">9</td>
<td>CANCELADO</td>
</tr>
<tr>
<td style="text-align: center">10</td>
<td>PENDENTE DE CONFIRMACAO</td>
</tr>
<tr>
<td style="text-align: center">11</td>
<td>FALHA NA COMUNICACAO COM FORNECEDOR</td>
</tr>
</tbody></table>

          <h1 id="http-status-code">HTTP Status Code</h1>

<table><thead>
<tr>
<th>HTTP STATUS CODE</th>
<th>DESCRIÇÃO</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>OK</td>
</tr>
<tr>
<td>201</td>
<td>Created</td>
</tr>
<tr>
<td>400</td>
<td>Bad Request</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
</tr>
<tr>
<td>404</td>
<td>Resource Not Found</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable</td>
</tr>
</tbody></table>

          <h1 id="erros-da-api">Erros da API</h1>

<h3 id="resposta">RESPOSTA</h3>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"error"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"O campo amount e obrigatorio."</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre class="highlight shell"><code><span class="o">{</span>
  <span class="s2">"error"</span>: <span class="o">{</span>
    <span class="s2">"message"</span>: <span class="s2">"O campo amount e obrigatorio."</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<table><thead>
<tr>
<th style="text-align: center">Propriedade</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: center"><code class="prettyprint">message</code></td>
<td>Mensagem de erro retornado pelo Gate2all</td>
</tr>
</tbody></table>

          <h1 id="status-eci">STATUS ECI</h1>

<table><thead>
<tr>
<th>RESULTADO DA AUTENTICAÇÃO</th>
<th>VISA</th>
<th>MASTERCARD</th>
<th>AURA</th>
<th>DEMAIS</th>
</tr>
</thead><tbody>
<tr>
<td>Transação autenticada com sucesso</td>
<td>5</td>
<td>2</td>
<td>N/D</td>
<td>N/D</td>
</tr>
<tr>
<td>Portador não fez autenticação, pois o emissor não forneceu mecanismos de autenticação.</td>
<td>6</td>
<td>1</td>
<td>N/D</td>
<td>N/D</td>
</tr>
<tr>
<td>Portador não se autenticou com sucesso, pois ocorreu um erro técnico inesperado.</td>
<td>7</td>
<td>1</td>
<td>N/D</td>
<td>N/D</td>
</tr>
<tr>
<td>Portador não se autenticou com sucesso.</td>
<td>7</td>
<td>0</td>
<td>N/D</td>
<td>N/D</td>
</tr>
<tr>
<td>A loja optou por autorizar sem passar pela autenticação.</td>
<td>7</td>
<td>0</td>
<td>0</td>
<td>7</td>
</tr>
</tbody></table>

          <h1 id="bandeiras">Bandeiras</h1>

<p>Bandeiras suportadas pela API</p>

<table><thead>
<tr>
<th>Adquirente</th>
<th>Cielo</th>
<th>REDE</th>
<th>GetNet</th>
</tr>
</thead><tbody>
<tr>
<td>Visa</td>
<td><input type="checkbox" checked disabled readonly></td>
<td><input type="checkbox" checked disabled readonly></td>
<td><input type="checkbox" checked disabled readonly></td>
</tr>
<tr>
<td>Mastercard</td>
<td><input type="checkbox" checked disabled readonly></td>
<td><input type="checkbox" checked disabled readonly></td>
<td><input type="checkbox" checked disabled readonly></td>
</tr>
<tr>
<td>Diners Club</td>
<td><input type="checkbox" checked disabled readonly></td>
<td><input type="checkbox" checked disabled readonly></td>
<td><input type="checkbox" disabled readonly></td>
</tr>
<tr>
<td>American Express</td>
<td><input type="checkbox" checked disabled readonly></td>
<td><input type="checkbox" disabled readonly></td>
<td><input type="checkbox" disabled readonly></td>
</tr>
<tr>
<td>Elo</td>
<td><input type="checkbox" checked disabled readonly></td>
<td><input type="checkbox" disabled readonly></td>
<td><input type="checkbox" disabled readonly></td>
</tr>
<tr>
<td>Hipercard</td>
<td><input type="checkbox" disabled readonly></td>
<td><input type="checkbox" checked disabled readonly></td>
<td><input type="checkbox" disabled readonly></td>
</tr>
<tr>
<td>Hiper</td>
<td><input type="checkbox" disabled readonly></td>
<td><input type="checkbox" checked disabled readonly></td>
<td><input type="checkbox" disabled readonly></td>
</tr>
<tr>
<td>Aura</td>
<td><input type="checkbox" checked disabled readonly></td>
<td><input type="checkbox" disabled readonly></td>
<td><input type="checkbox" disabled readonly></td>
</tr>
<tr>
<td>Discover</td>
<td><input type="checkbox" checked disabled readonly></td>
<td><input type="checkbox" disabled readonly></td>
<td><input type="checkbox" disabled readonly></td>
</tr>
<tr>
<td>JCB</td>
<td><input type="checkbox" checked disabled readonly></td>
<td><input type="checkbox" disabled readonly></td>
<td><input type="checkbox" disabled readonly></td>
</tr>
<tr>
<td>Visa Electron</td>
<td><input type="checkbox" checked disabled readonly></td>
<td><input type="checkbox" disabled readonly></td>
<td><input type="checkbox" disabled readonly></td>
</tr>
<tr>
<td>Mastercard Maestro</td>
<td><input type="checkbox" checked disabled readonly></td>
<td><input type="checkbox" disabled readonly></td>
<td><input type="checkbox" disabled readonly></td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="json">JSON</a>
                <a href="#" data-language-name="shell">cURL</a>
                <a href="#" data-language-name="java">JAVA</a>
          </div>
      </div>
    </div>
  </body>
  <script type="text/javascript">
      function googleTranslateElementInit() {
          new google.translate.TranslateElement({pageLanguage: 'pt', includedLanguages: 'de,en,es,fr,it,ja,zh-CN',
              layout: google.translate.TranslateElement.InlineLayout.SIMPLE, autoDisplay: false, multilanguagePage: true}, 'google_translate_element');
      }
  </script>

  <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
</html>
